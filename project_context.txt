Project Context From: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend
Generated On: sam. 27 déc. 2025 14:16:03 WAT
===============================================
Ignored Directory Patterns: .* node_modules vendor build dist target __pycache__ .next cache target storage
Ignored File Patterns: *.log *.jar *.pdf *.class *.sqlite project_context.txt package-lock.json yarn.lock composer.lock *.ico pnpm-lock.yaml
===============================================

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/api/proxy/[...slug]/route.ts

import { auth } from '@clerk/nextjs/server';
import { NextRequest, NextResponse } from 'next/server';

// On récupère l'URL du backend depuis le .env (défini à l'étape 1)
const TARGET_API_URL = process.env.PYTHON_API_BASE_URL || "http://localhost:8000/api/v1";

async function proxyRequest(req: NextRequest) {
  try {
    const { getToken } = await auth(); // await est important dans les versions récentes de Clerk
    let token: string | null = null;

    if (getToken) {
      token = await getToken();
    }

    // 1. Extraire le chemin après /api/proxy/
    // Ex: si l'URL est /api/proxy/expert/cas-cliniques/, slug sera "expert/cas-cliniques/"
    const path = req.nextUrl.pathname.replace('/api/proxy/', '');
    
    // 2. Construire l'URL cible
    // Ex: http://104.236.244.230/api/v1/expert/cas-cliniques/?param=1
    const targetUrl = `${TARGET_API_URL}/${path}${req.nextUrl.search}`;
    
    console.log(`[Proxy] Forwarding to: ${targetUrl}`);

    const headers = new Headers(req.headers);
    // On nettoie les headers qui pourraient causer des soucis
    headers.delete('host');
    headers.delete('connection');
    
    if (token) {
      headers.set('Authorization', `Bearer ${token}`);
    }

    // Si on a un body (POST/PUT), on doit le lire
    let body = null;
    if (req.method !== 'GET' && req.method !== 'HEAD') {
        const textBody = await req.text();
        body = textBody || null;
    }

    const response = await fetch(targetUrl, {
      method: req.method,
      headers: headers,
      body: body,
      // @ts-ignore - Nécessaire pour certains environnements Node
      duplex: 'half', 
    });

    const data = await response.text();

    return new NextResponse(data, {
      status: response.status,
      statusText: response.statusText,
      headers: {
        'Content-Type': response.headers.get('Content-Type') || 'application/json',
      },
    });

  } catch (error) {
    console.error(`[API Proxy Error]:`, error);
    return new NextResponse(JSON.stringify({ error: "Proxy request failed", details: String(error) }), { status: 502 });
  }
}

export async function GET(req: NextRequest) { return proxyRequest(req); }
export async function POST(req: NextRequest) { return proxyRequest(req); }
export async function PUT(req: NextRequest) { return proxyRequest(req); }
export async function PATCH(req: NextRequest) { return proxyRequest(req); } // Ajouté PATCH au cas où
export async function DELETE(req: NextRequest) { return proxyRequest(req); }// END OF FILE: app/api/proxy/[...slug]/route.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/buttons/page.tsx

import { Button } from "@/components/ui/button"

const ButtonsPage = () => {
    return (
        <div className="p-4 space-y-4 flex flex-col max-w-[200px]">
            <Button>
                Primary
            </Button>
            <Button variant="primary">
                Primary
            </Button>
            <Button variant="primaryOutline">
                Primary Outline
            </Button>

            <Button variant="secondary">
                Secondary
            </Button>
            <Button variant="secondaryOutline">
                Secondary Outline
            </Button>

            <Button variant="danger">
                Danger
            </Button>
            <Button variant="dangerOutline">
                Danger Outline
            </Button>

            <Button variant="super">
                Super
            </Button>
            <Button variant="superOutline">
                Super Outline
            </Button>

            <Button variant="ghost">
                Ghost
            </Button>

            <Button variant="Sidebar">
                Sidebar
            </Button>
            <Button variant="SidebarOutline">
                Sidebar Outline
            </Button>

        </div>
    )
}

export default ButtonsPage;// END OF FILE: app/buttons/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/globals.css

@import 'tailwindcss';

html, 
body,
:root {
  @apply h-full;
}
// END OF FILE: app/globals.css

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/layout.tsx

import "./globals.css";

import {
  ClerkProvider,
  SignInButton,
  SignUpButton,
  SignedIn,
  SignedOut,
  UserButton,
} from '@clerk/nextjs'


export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  console.log("LAYOUT LOADED");

  return (
    <ClerkProvider>
      <html lang="fr">
        <body>{children}</body>
      </html>
    </ClerkProvider>
  );
}
// END OF FILE: app/layout.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/faq/page.tsx

const FAQPage = () => {
    return ( 
        <div className="d">
            FAQ Page
        </div>
     );
}
 
export default FAQPage;// END OF FILE: app/(marketing)/faq/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/footer.tsx

// import { Button } from "@/components/ui/button";
// import Image from "next/image";

// export const Footer = () => {
//     return (
//         <footer className="hidden lg:block h-20 w-full border-t-2 border-slate-200 p-2">
//             <div className=" max-w-5xl mx-auto flex items-center justify-evenly h-full">
//                 <Button>
//                     <Image 
//                         src="/paludisme.png" 
//                         alt="Paludisme Logo" 
//                         height={32} 
//                         width={40}
//                         className="mr-4 rounded-md" 
//                     />
//                     Paludisme
//                 </Button>
//                 <Button>
//                     <Image 
//                         src="/avc.png" 
//                         alt="AVC Logo" 
//                         height={32} 
//                         width={40}
//                         className="mr-4 rounded-md" 
//                     />
//                     AVC
//                 </Button>
//                 <Button>
//                     <Image 
//                         src="/cervical_cancer.png" 
//                         alt="Cervical Cancer Logo" 
//                         height={32} 
//                         width={40}
//                         className="mr-4 rounded-md" 
//                     />
//                     Cervical Cancer
//                 </Button>
//                 <Button>
//                     <Image 
//                         src="/diabete.png" 
//                         alt="Diabete Logo" 
//                         height={32} 
//                         width={40}
//                         className="mr-4 rounded-md" 
//                     />
//                     Diabete
//                 </Button>

//             </div>
//         </footer>
//       );
// }
 


import { Button } from "@/components/ui/button";
import Image from "next/image";

export const Footer = () => {
    return (
        // On garde le hidden lg:block car sur mobile, on préfère souvent 
        // ne pas encombrer le bas de l'écran avec trop de boutons.
        <footer className="hidden lg:block h-20 w-full border-t-2 border-slate-200 p-2 bg-white">
            <div className="max-w-screen-lg mx-auto flex items-center justify-evenly h-full">
                
                {/* Bouton Paludisme */}
                <Button size="lg" variant="ghost" className="w-full hover:bg-slate-100 transition">
                    <Image 
                        src="/paludisme.png" 
                        alt="Paludisme" 
                        height={32} 
                        width={40}
                        className="mr-4 rounded-md object-contain" 
                    />
                    <span className="font-bold text-slate-600">Paludisme</span>
                </Button>

                {/* Bouton AVC */}
                <Button size="lg" variant="ghost" className="w-full hover:bg-slate-100 transition">
                    <Image 
                        src="/avc.png" 
                        alt="AVC" 
                        height={32} 
                        width={40}
                        className="mr-4 rounded-md object-contain" 
                    />
                    <span className="font-bold text-slate-600">AVC</span>
                </Button>

                {/* Bouton Cancer du col */}
                <Button size="lg" variant="ghost" className="w-full hover:bg-slate-100 transition">
                    <Image 
                        src="/cervical_cancer.png" 
                        alt="Cancer" 
                        height={32} 
                        width={40}
                        className="mr-4 rounded-md object-contain" 
                    />
                    <span className="font-bold text-slate-600">Cancer Col</span>
                </Button>

                {/* Bouton Diabète */}
                <Button size="lg" variant="ghost" className="w-full hover:bg-slate-100 transition">
                    <Image 
                        src="/diabete.png" 
                        alt="Diabète" 
                        height={32} 
                        width={40}
                        className="mr-4 rounded-md object-contain" 
                    />
                    <span className="font-bold text-slate-600">Diabète</span>
                </Button>

            </div>
        </footer>
    );
}// END OF FILE: app/(marketing)/footer.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/header.tsx

import { Button } from "@/components/ui/button";
import { ClerkLoaded, ClerkLoading, SignedIn, SignedOut, UserButton, SignInButton, } from "@clerk/nextjs";
import { Loader } from "lucide-react";
import Image from "next/image";



export const Header = () => {
    return ( 
        <header className="h-20 w-full border-b-2 border-slate-200 px-4">
            <div className="lg:max-w-5xl mx-auto flex items-center justify-between h-full">
                <div className="pt-8 pl-4 pb-7 flex items-center gap-x-3">
                    <Image src="/Minimal_Geometric_Smirk_Face_Icon.png" height={40} width={40} alt="Mascot"/>
                    <h1 className="text-2xl font-extrabold text-green-600 tracking-wide">
                        Tuteur5GI
                    </h1>
                </div>
                <ClerkLoading>
                    <Loader className="h-5 w-5 text-muted-foreground animate-spin "/>
                </ClerkLoading>
                <ClerkLoaded>
                    <SignedIn>
                        <UserButton
                            afterSignOutUrl="/"                            
                        />
                    </SignedIn>
                    <SignedOut>
                        <SignInButton                        
                            mode="modal"
                            fallbackRedirectUrl="/learn"
                            forceRedirectUrl="/learn"
                        >
                            <Button size="lg" variant="ghost">
                                Login
                            </Button>

                        </SignInButton>
                    </SignedOut>
                </ClerkLoaded>
            </div>
        </header>
     );
}
 
// END OF FILE: app/(marketing)/header.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/layout.tsx

import { Footer } from "./footer";
import { Header } from "./header";

type Props = {
    children: React.ReactNode;
};


const MarketingLayout = ({ children }: Props) => {
    return ( 
        <div className="min-h-screen flex flex-col">
            <Header />
            <main className="flex-1 flex flex-col items-center justify-center">
                {children}
            </main>
            <Footer />
            
        </div>
    );
};

export default MarketingLayout;// END OF FILE: app/(marketing)/layout.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/[caseId]/page.tsx

"use client";

import { useState, useEffect } from "react";
import { useParams } from "next/navigation";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { Skeleton } from "@/components/ui/skeleton";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  ArrowLeft,
  Loader2,
  User,
  Stethoscope,
  FlaskConical,
  Pill,
  Sparkles,
  BrainCircuit,
  Hash,
  Calendar,
  AlertCircle,
  CheckCircle2,
  Eye,
  EyeOff
} from "lucide-react";
import { getCaseById } from "@/lib/api";

type CasClinique = Awaited<ReturnType<typeof getCaseById>>;

const DetailSection = ({
  title,
  icon,
  children,
  className,
}: {
  title: string;
  icon: React.ReactNode;
  children: React.ReactNode;
  className?: string;
}) => (
  <Card className={className}>
    <CardHeader className="pb-3">
      <CardTitle className="text-lg flex items-center gap-2">
        {icon}
        {title}
      </CardTitle>
    </CardHeader>
    <CardContent>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-3">{children}</div>
    </CardContent>
  </Card>
);

const DetailItem = ({
  label,
  value,
}: {
  label: string;
  value: string | number | boolean | undefined | null;
}) => {
  if (value === undefined || value === null || value === "") return null;
  return (
    <div className="bg-muted/50 p-3 rounded-lg border">
      <p className="text-xs font-medium text-muted-foreground uppercase tracking-wide">
        {label}
      </p>
      <p className="text-sm font-medium mt-1">{String(value)}</p>
    </div>
  );
};

const CaseDetailPage = () => {
  const params = useParams();
  const caseId = params.caseId as string;

  const [cas, setCas] = useState<CasClinique | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const [isChallengeMode, setIsChallengeMode] = useState(false);
  const [userHypothesis, setUserHypothesis] = useState("");
  const [userExams, setUserExams] = useState("");
  const [showResults, setShowResults] = useState(false);

  useEffect(() => {
    if (!caseId) return;
    const fetchCaseDetails = async () => {
      setIsLoading(true);
      setError(null);
      try {
        const data = await getCaseById(caseId);
        setCas(data);
      } catch (e: any) {
        setError(e.message || "Impossible de charger les details du cas.");
        console.error(e);
      } finally {
        setIsLoading(false);
      }
    };
    fetchCaseDetails();
  }, [caseId]);

  const startChallenge = () => {
    setIsChallengeMode(true);
    setShowResults(false);
    setUserHypothesis("");
    setUserExams("");
  };

  const exitChallenge = () => {
    setIsChallengeMode(false);
    setShowResults(false);
  };

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
        <div className="p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto">
          <Skeleton className="h-8 w-48 mb-6" />
          <Skeleton className="h-12 w-3/4 mb-2" />
          <Skeleton className="h-4 w-1/2 mb-8" />
          <div className="space-y-4">
            <Skeleton className="h-40 w-full" />
            <Skeleton className="h-40 w-full" />
          </div>
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
        <div className="p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto">
          <Card className="border-destructive">
            <CardContent className="p-6">
              <div className="flex items-center gap-3 justify-center text-destructive">
                <AlertCircle className="h-5 w-5" />
                <p>{error}</p>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  }

  if (!cas) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
        <div className="p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto">
          <Card>
            <CardContent className="p-12 text-center">
              <p className="text-muted-foreground">Aucun cas a afficher.</p>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto">
        {/* Back Link */}
        <Link
          href="/expert"
          className="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground mb-6 transition-colors"
        >
          <ArrowLeft className="h-4 w-4" />
          Retour a l'explorateur
        </Link>

        {/* Header */}
        <div className="mb-8">
          <div className="flex flex-wrap items-start justify-between gap-4">
            <div>
              <h1 className="text-3xl font-bold tracking-tight text-primary">
                {cas.motif_consultation}
              </h1>
              <div className="flex flex-wrap items-center gap-3 mt-2">
                <Badge variant="outline" className="font-mono text-xs flex items-center gap-1">
                  <Hash className="h-3 w-3" />
                  {cas.id_unique}
                </Badge>
                <Badge variant="secondary" className="text-xs">
                  Hash: {cas.hash_authentification.substring(0, 12)}...
                </Badge>
              </div>
            </div>
            {!isChallengeMode && (
              <Button onClick={startChallenge} className="gap-2">
                <Sparkles className="h-4 w-4" />
                Lancer le Defi Expert
              </Button>
            )}
          </div>
        </div>

        {/* Patient Info - Always visible */}
        <DetailSection
          title="Informations Patient"
          icon={<User className="h-5 w-5 text-primary" />}
          className="mb-4"
        >
          <DetailItem label="Age" value={`${cas.donnees_personnelles.age} ans`} />
          <DetailItem label="Sexe" value={cas.donnees_personnelles.sexe} />
        </DetailSection>

        {/* Symptoms - Always visible */}
        <DetailSection
          title="Symptomes declares"
          icon={<Stethoscope className="h-5 w-5 text-primary" />}
          className="mb-4"
        >
          {cas.symptomes.map((s, i) => (
            <DetailItem
              key={i}
              label={s.nom}
              value={`${s.degre || "Non precise"} - Duree: ${s.duree || "N/A"}`}
            />
          ))}
        </DetailSection>

        {/* Normal Mode: Show all info */}
        {!isChallengeMode && (
          <>
            <DetailSection
              title="Diagnostic Physique"
              icon={<Stethoscope className="h-5 w-5 text-primary" />}
              className="mb-4"
            >
              {cas.diagnostic_physique.map((d, i) => (
                <DetailItem key={i} label={d.nom} value={d.resultat} />
              ))}
            </DetailSection>

            <DetailSection
              title="Examens Complementaires"
              icon={<FlaskConical className="h-5 w-5 text-primary" />}
              className="mb-4"
            >
              {cas.examens_complementaires.map((e, i) => (
                <DetailItem key={i} label={e.nom} value={e.resultat} />
              ))}
            </DetailSection>
          </>
        )}

        {/* Challenge Mode */}
        {isChallengeMode && (
          <Card className="border-2 border-primary/50 bg-primary/5 mb-4">
            <CardHeader>
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="rounded-full bg-primary/10 p-2">
                    <BrainCircuit className="h-6 w-6 text-primary" />
                  </div>
                  <div>
                    <CardTitle className="text-xl text-primary">Mode Defi Expert</CardTitle>
                    <CardDescription>
                      Les sections "Diagnostic" et "Examens" sont masquees
                    </CardDescription>
                  </div>
                </div>
                <Button variant="ghost" size="sm" onClick={exitChallenge}>
                  Quitter le defi
                </Button>
              </div>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="space-y-2">
                <label className="text-sm font-medium flex items-center gap-2">
                  <span className="bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-xs">
                    1
                  </span>
                  Quelles sont vos hypotheses de diagnostic ?
                </label>
                <Textarea
                  value={userHypothesis}
                  onChange={(e) => setUserHypothesis(e.target.value)}
                  placeholder="Ex: Paludisme simple, crise de tetanie, infection urinaire..."
                  className="bg-background"
                  rows={3}
                />
              </div>

              <div className="space-y-2">
                <label className="text-sm font-medium flex items-center gap-2">
                  <span className="bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-xs">
                    2
                  </span>
                  Quels examens complementaires prescrivez-vous ?
                </label>
                <Textarea
                  value={userExams}
                  onChange={(e) => setUserExams(e.target.value)}
                  placeholder="Ex: Goutte epaisse, NFS, ionogramme sanguin..."
                  className="bg-background"
                  rows={3}
                />
              </div>

              <div className="flex justify-center pt-4">
                <Button
                  onClick={() => setShowResults(true)}
                  disabled={showResults || (!userHypothesis && !userExams)}
                  size="lg"
                  className="gap-2"
                >
                  {showResults ? (
                    <Eye className="h-4 w-4" />
                  ) : (
                    <EyeOff className="h-4 w-4" />
                  )}
                  {showResults ? "Resultats affiches" : "Comparer avec le cas reel"}
                </Button>
              </div>

              {showResults && (
                <div className="mt-8 pt-6 border-t-2 border-primary/30 space-y-4 animate-in fade-in-50 slide-in-from-bottom-4">
                  <div className="text-center mb-6">
                    <Badge className="bg-primary text-primary-foreground px-4 py-1">
                      <CheckCircle2 className="h-4 w-4 mr-2" />
                      Resultats du Cas Reel
                    </Badge>
                  </div>

                  <DetailSection
                    title="Diagnostic Physique"
                    icon={<Stethoscope className="h-5 w-5 text-primary" />}
                  >
                    {cas.diagnostic_physique.map((d, i) => (
                      <DetailItem key={i} label={d.nom} value={d.resultat} />
                    ))}
                  </DetailSection>

                  <DetailSection
                    title="Examens Complementaires"
                    icon={<FlaskConical className="h-5 w-5 text-primary" />}
                  >
                    {cas.examens_complementaires.map((e, i) => (
                      <DetailItem key={i} label={e.nom} value={e.resultat} />
                    ))}
                  </DetailSection>
                </div>
              )}
            </CardContent>
          </Card>
        )}
      </div>
    </div>
  );
};

export default CaseDetailPage;
// END OF FILE: app/(marketing)/(main)/expert/[caseId]/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/dashboard/DashboardClient.tsx

"use client";

import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { StatCard } from "@/components/expert/stat-card";
import { CasesQueueTable, type CaseData } from "@/components/expert/cases-queue-table";
import { forceExtraction } from "@/lib/api";
import {
  HardHat,
  CheckCircle,
  ListTodo,
  TrendingUp,
  RefreshCw,
  Activity,
  Loader2
} from "lucide-react";

type DashboardData = {
  kpis: {
    pendingCases: number;
    validatedCases: number;
    studentSuccessRate: string;
  };
  cases: CaseData[];
};

type Props = {
  initialData: DashboardData;
};

export const DashboardClient = ({ initialData }: Props) => {
  const [data, setData] = useState(initialData);
  const [isLoading, setIsLoading] = useState(false);

  const handleForceExtraction = async () => {
    setIsLoading(true);
    try {
      const result = await forceExtraction();
      alert(`Extraction reussie : ${result.message}\nLes donnees seront rafraichies.`);
    } catch (error) {
      console.error(error);
      alert(`Echec de l'extraction : ${error instanceof Error ? error.message : "Erreur inconnue"}`);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
          <div>
            <h1 className="text-3xl font-bold tracking-tight">Dashboard Expert</h1>
            <p className="text-muted-foreground mt-1">
              Gerez et validez les cas cliniques extraits automatiquement
            </p>
          </div>
          <Button
            onClick={handleForceExtraction}
            disabled={isLoading}
            size="lg"
            className="gap-2"
          >
            {isLoading ? (
              <Loader2 className="h-4 w-4 animate-spin" />
            ) : (
              <RefreshCw className="h-4 w-4" />
            )}
            {isLoading ? "Extraction en cours..." : "Forcer l'extraction Fultang"}
          </Button>
        </div>

        {/* Stats Cards */}
        <div className="grid gap-4 md:grid-cols-3 mb-8">
          <StatCard
            title="Cas en attente"
            value={data.kpis.pendingCases}
            icon={ListTodo}
            trend={data.kpis.pendingCases > 0 ? { value: data.kpis.pendingCases, isPositive: false } : undefined}
          />
          <StatCard
            title="Cas Valides"
            value={data.kpis.validatedCases}
            icon={CheckCircle}
          />
          <StatCard
            title="Taux de reussite etudiants"
            value={data.kpis.studentSuccessRate}
            icon={TrendingUp}
          />
        </div>

        {/* Quick Actions */}
        <Card className="mb-8">
          <CardHeader className="pb-3">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <Activity className="h-5 w-5 text-primary" />
                <CardTitle className="text-lg">Actions Rapides</CardTitle>
              </div>
              <Badge variant="outline" className="text-xs">
                {data.cases.length} cas a traiter
              </Badge>
            </div>
          </CardHeader>
          <CardContent>
            <div className="flex flex-wrap gap-3">
              <Button variant="outline" size="sm" className="gap-2">
                <CheckCircle className="h-4 w-4" />
                Valider tous les cas haute confiance
              </Button>
              <Button variant="outline" size="sm" className="gap-2">
                <HardHat className="h-4 w-4" />
                Voir les statistiques detaillees
              </Button>
            </div>
          </CardContent>
        </Card>

        {/* Cases Queue */}
        <CasesQueueTable cases={data.cases} />
      </div>
    </div>
  );
};
// END OF FILE: app/(marketing)/(main)/expert/dashboard/DashboardClient.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/dashboard/page.tsx

import { getExpertDashboardData } from "@/lib/api";
import { DashboardClient } from "./DashboardClient";

const ExpertDashboardPage = async () => {
  // En tant que Composant Serveur, on peut appeler directement l'API.
  // Pour l'instant, cela appelle la fonction placeholder dans api.ts.
  const initialData = await getExpertDashboardData();

  return <DashboardClient initialData={initialData} />;
};

export default ExpertDashboardPage;
// END OF FILE: app/(marketing)/(main)/expert/dashboard/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/editor/[id]/EditorClient.tsx

"use client";

import { useState } from "react";
import { useRouter } from "next/navigation";
import { RawDataViewer } from "@/components/expert/raw-data-viewer";
import { CaseEditorForm, type CaseFormData } from "@/components/expert/case-editor-form";
import { ValidationActions } from "@/components/expert/validation-actions";
import { updateCase, publishCase, rejectCase } from "@/lib/api";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Database, FileEdit, Eye } from "lucide-react";

type Props = {
  caseId: string;
  initialRawData: object;
  initialFormData: CaseFormData;
};

export const EditorClient = ({ caseId, initialRawData, initialFormData }: Props) => {
  const [formData, setFormData] = useState(initialFormData);
  const router = useRouter();

  const handleSave = (data: CaseFormData) => {
    setFormData(data);
    console.log("Form data updated in state", data);
  };

  const handleReject = async () => {
    try {
      await rejectCase(caseId);
      alert("Cas rejete avec succes.");
      router.push("/expert/dashboard");
    } catch (error) {
      alert(`Erreur lors du rejet : ${error}`);
    }
  };

  const handleSaveDraft = async () => {
    try {
      await updateCase(caseId, formData);
      alert("Brouillon sauvegarde avec succes.");
    } catch (error) {
      alert(`Erreur lors de la sauvegarde : ${error}`);
    }
  };

  const handlePublish = async () => {
    try {
      await publishCase(caseId);
      alert("Cas publie avec succes.");
      router.push("/expert/library");
    } catch (error) {
      alert(`Erreur lors de la publication : ${error}`);
    }
  };

  return (
    <div className="space-y-6">
      {/* Desktop: Side by side */}
      <div className="hidden lg:grid lg:grid-cols-2 gap-6">
        <RawDataViewer data={initialRawData} />
        <CaseEditorForm initialData={formData} onSave={handleSave} />
      </div>

      {/* Mobile/Tablet: Tabs */}
      <div className="lg:hidden">
        <Tabs defaultValue="editor" className="w-full">
          <TabsList className="grid w-full grid-cols-2">
            <TabsTrigger value="editor" className="gap-2">
              <FileEdit className="h-4 w-4" />
              Editeur
            </TabsTrigger>
            <TabsTrigger value="raw" className="gap-2">
              <Database className="h-4 w-4" />
              Donnees brutes
            </TabsTrigger>
          </TabsList>
          <TabsContent value="editor" className="mt-4">
            <CaseEditorForm initialData={formData} onSave={handleSave} />
          </TabsContent>
          <TabsContent value="raw" className="mt-4">
            <RawDataViewer data={initialRawData} />
          </TabsContent>
        </Tabs>
      </div>

      {/* Preview Section */}
      <Card>
        <CardContent className="p-6">
          <div className="flex items-center gap-2 mb-4">
            <Eye className="h-5 w-5 text-muted-foreground" />
            <h3 className="font-semibold">Apercu du cas</h3>
            <Badge variant="secondary" className="ml-auto">
              {formData.difficulty}
            </Badge>
          </div>
          <div className="prose prose-sm max-w-none">
            <h4 className="text-lg font-medium text-primary">{formData.title}</h4>
            <p className="text-muted-foreground">{formData.introduction}</p>
          </div>
        </CardContent>
      </Card>

      <ValidationActions
        onReject={handleReject}
        onSaveDraft={handleSaveDraft}
        onPublish={handlePublish}
      />
    </div>
  );
};
// END OF FILE: app/(marketing)/(main)/expert/editor/[id]/EditorClient.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/editor/[id]/page.tsx

import { getCaseById } from "@/lib/api";
import { EditorClient } from "./EditorClient";
import { notFound } from "next/navigation";
import { Badge } from "@/components/ui/badge";
import { FileEdit, Hash } from "lucide-react";

const transformApiToFormData = (apiData: any) => {
  return {
    title: apiData.motif_consultation || "Titre non defini",
    difficulty: "Moyen" as const,
    introduction: `Patient de ${apiData.donnees_personnelles?.age} ans, de sexe ${apiData.donnees_personnelles?.sexe}.`,
  };
};

const CaseEditorPage = async ({ params }: { params: { id: string } }) => {
  let caseData;
  try {
    caseData = await getCaseById(params.id);
  } catch (error) {
    console.error(error);
    notFound();
  }

  const initialFormData = transformApiToFormData(caseData);

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
          <div>
            <h1 className="text-3xl font-bold tracking-tight flex items-center gap-3">
              <FileEdit className="h-8 w-8 text-primary" />
              Edition du Cas
            </h1>
            <p className="text-muted-foreground mt-1">
              Verifiez et modifiez les informations extraites automatiquement
            </p>
          </div>
          <Badge variant="outline" className="flex items-center gap-2 text-sm font-mono">
            <Hash className="h-4 w-4" />
            {params.id}
          </Badge>
        </div>

        <EditorClient
          caseId={params.id}
          initialRawData={caseData}
          initialFormData={initialFormData}
        />
      </div>
    </div>
  );
};

export default CaseEditorPage;
// END OF FILE: app/(marketing)/(main)/expert/editor/[id]/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/library/page.tsx

import Link from "next/link";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { getCases } from "@/lib/api";
import { z } from "zod";
import { BookOpen, Eye, User, AlertCircle, Library } from "lucide-react";

const CaseSchemaForPage = z.object({
  id_unique: z.string(),
  motif_consultation: z.string(),
  donnees_personnelles: z.object({ age: z.number() })
});
type PublishedCaseData = z.infer<typeof CaseSchemaForPage>;

const ExpertLibraryPage = async () => {
  let cases: PublishedCaseData[] = [];
  let fetchError: string | null = null;

  try {
    cases = await getCases({});
  } catch (error) {
    console.error("Erreur lors du chargement de la bibliotheque:", error);
    fetchError = "Impossible de charger la bibliotheque de cas. L'API est peut-etre indisponible.";
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
          <div>
            <h1 className="text-3xl font-bold tracking-tight flex items-center gap-3">
              <Library className="h-8 w-8 text-primary" />
              Bibliotheque des Cas
            </h1>
            <p className="text-muted-foreground mt-1">
              Tous les cas cliniques disponibles pour les etudiants
            </p>
          </div>
          <Badge variant="secondary" className="text-sm flex items-center gap-1">
            <BookOpen className="h-4 w-4" />
            {cases.length} cas publies
          </Badge>
        </div>

        {/* Error State */}
        {fetchError && (
          <Card className="border-destructive">
            <CardContent className="p-6">
              <div className="flex items-center gap-3 justify-center text-destructive">
                <AlertCircle className="h-5 w-5" />
                <p>{fetchError}</p>
              </div>
            </CardContent>
          </Card>
        )}

        {/* Table */}
        {!fetchError && (
          <Card>
            <CardHeader>
              <CardTitle className="text-xl">Cas Cliniques Disponibles</CardTitle>
              <CardDescription>
                Liste de tous les cas valides et publies sur la plateforme
              </CardDescription>
            </CardHeader>
            <CardContent>
              {cases.length === 0 ? (
                <div className="flex flex-col items-center justify-center py-12 text-center">
                  <div className="rounded-full bg-muted p-4 mb-4">
                    <BookOpen className="h-8 w-8 text-muted-foreground" />
                  </div>
                  <p className="text-lg font-medium text-muted-foreground">
                    Aucun cas dans la bibliotheque
                  </p>
                  <p className="text-sm text-muted-foreground mt-1">
                    Les cas publies apparaitront ici
                  </p>
                </div>
              ) : (
                <Table>
                  <TableHeader>
                    <TableRow>
                      <TableHead>Titre du Cas</TableHead>
                      <TableHead>Age Patient</TableHead>
                      <TableHead>Difficulte</TableHead>
                      <TableHead className="text-right">Actions</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {cases.map((caseItem) => (
                      <TableRow key={caseItem.id_unique} className="group">
                        <TableCell>
                          <div className="space-y-1">
                            <p className="font-medium">{caseItem.motif_consultation}</p>
                            <p className="text-xs text-muted-foreground font-mono">
                              ID: {caseItem.id_unique}
                            </p>
                          </div>
                        </TableCell>
                        <TableCell>
                          <div className="flex items-center gap-2">
                            <User className="h-4 w-4 text-muted-foreground" />
                            <span>{caseItem.donnees_personnelles.age} ans</span>
                          </div>
                        </TableCell>
                        <TableCell>
                          <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
                            Non definie
                          </Badge>
                        </TableCell>
                        <TableCell className="text-right">
                          <Link href={`/expert/editor/${caseItem.id_unique}`}>
                            <Button variant="outline" size="sm" className="gap-2">
                              <Eye className="h-4 w-4" />
                              Consulter
                            </Button>
                          </Link>
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              )}
            </CardContent>
          </Card>
        )}
      </div>
    </div>
  );
};

export default ExpertLibraryPage;
// END OF FILE: app/(marketing)/(main)/expert/library/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/page.tsx

"use client";

import { useState, useEffect, useCallback } from "react";
import Link from "next/link";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { Skeleton } from "@/components/ui/skeleton";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Search,
  Loader2,
  Filter,
  User,
  Stethoscope,
  ChevronRight,
  FileSearch,
  X,
  SlidersHorizontal
} from "lucide-react";
import { getCases, getFilters } from "@/lib/api";

type ClinicalCase = Awaited<ReturnType<typeof getCases>>[number];

type FiltersState = {
  genders: string[];
  professions: string[];
  symptoms: string[];
};

const ExpertPage = () => {
  const [results, setResults] = useState<ClinicalCase[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const [keyword, setKeyword] = useState("");
  const [minAge, setMinAge] = useState("");
  const [maxAge, setMaxAge] = useState("");
  const [gender, setGender] = useState("");
  const [profession, setProfession] = useState("");
  const [symptom, setSymptom] = useState("");

  const [filtersOptions, setFiltersOptions] = useState<FiltersState>({
    genders: [],
    professions: [],
    symptoms: [],
  });

  const [showFilters, setShowFilters] = useState(true);

  useEffect(() => {
    const fetchFilters = async () => {
      try {
        const data = await getFilters();
        setFiltersOptions(data);
      } catch (e) {
        console.error("Impossible de charger les options de filtres:", e);
      }
    };
    fetchFilters();
  }, []);

  const handleSearch = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const data = await getCases({
        keyword: keyword,
        min_age: minAge,
        max_age: maxAge,
        gender: gender,
        profession: profession,
        symptom: symptom,
      });
      setResults(data);
    } catch (e: any) {
      console.error("Erreur lors de la recuperation des donnees:", e);
      setError(e.message || "Une erreur est survenue. Le backend est-il demarre ?");
    } finally {
      setIsLoading(false);
    }
  }, [keyword, minAge, maxAge, gender, profession, symptom]);

  useEffect(() => {
    handleSearch();
  }, [handleSearch]);

  const clearFilters = () => {
    setKeyword("");
    setMinAge("");
    setMaxAge("");
    setGender("");
    setProfession("");
    setSymptom("");
  };

  const hasActiveFilters = keyword || minAge || maxAge || gender || profession || symptom;

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
          <div>
            <h1 className="text-3xl font-bold tracking-tight flex items-center gap-3">
              <FileSearch className="h-8 w-8 text-primary" />
              Explorateur de Cas
            </h1>
            <p className="text-muted-foreground mt-1">
              Recherchez et consultez les cas cliniques disponibles
            </p>
          </div>
          <div className="flex items-center gap-2">
            <Badge variant="secondary" className="text-sm">
              {results.length} cas trouves
            </Badge>
            <Button
              variant="outline"
              size="sm"
              onClick={() => setShowFilters(!showFilters)}
              className="gap-2"
            >
              <SlidersHorizontal className="h-4 w-4" />
              {showFilters ? "Masquer filtres" : "Afficher filtres"}
            </Button>
          </div>
        </div>

        {/* Filters Card */}
        {showFilters && (
          <Card className="mb-6">
            <CardHeader className="pb-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <Filter className="h-5 w-5 text-primary" />
                  <CardTitle className="text-lg">Filtres de recherche</CardTitle>
                </div>
                {hasActiveFilters && (
                  <Button variant="ghost" size="sm" onClick={clearFilters} className="gap-1 text-muted-foreground">
                    <X className="h-4 w-4" />
                    Effacer
                  </Button>
                )}
              </div>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                {/* Keyword Search */}
                <div className="md:col-span-2 relative">
                  <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                  <Input
                    placeholder="Rechercher par mot-cle (ex: Paludisme, Fievre...)"
                    value={keyword}
                    onChange={(e) => setKeyword(e.target.value)}
                    className="pl-10"
                    onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                  />
                </div>

                {/* Age Range */}
                <Input
                  type="number"
                  placeholder="Age minimum"
                  value={minAge}
                  onChange={(e) => setMinAge(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                />
                <Input
                  type="number"
                  placeholder="Age maximum"
                  value={maxAge}
                  onChange={(e) => setMaxAge(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                />

                {/* Selects */}
                <Select value={gender} onValueChange={setGender}>
                  <SelectTrigger>
                    <SelectValue placeholder="Tous les sexes" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">Tous les sexes</SelectItem>
                    {filtersOptions.genders.map((g) => (
                      <SelectItem key={g} value={g}>{g}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>

                <Select value={profession} onValueChange={setProfession}>
                  <SelectTrigger className="lg:col-span-2">
                    <SelectValue placeholder="Toutes les professions" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">Toutes les professions</SelectItem>
                    {filtersOptions.professions.map((p) => (
                      <SelectItem key={p} value={p}>{p}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>

                <Select value={symptom} onValueChange={setSymptom}>
                  <SelectTrigger>
                    <SelectValue placeholder="Tous les symptomes" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">Tous les symptomes</SelectItem>
                    {filtersOptions.symptoms.map((s) => (
                      <SelectItem key={s} value={s}>{s}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              <div className="flex justify-end mt-4">
                <Button onClick={handleSearch} disabled={isLoading} className="gap-2">
                  {isLoading ? (
                    <Loader2 className="h-4 w-4 animate-spin" />
                  ) : (
                    <Search className="h-4 w-4" />
                  )}
                  {isLoading ? "Recherche..." : "Rechercher"}
                </Button>
              </div>
            </CardContent>
          </Card>
        )}

        {/* Results */}
        <div className="space-y-4">
          {error && (
            <Card className="border-destructive">
              <CardContent className="p-6">
                <p className="text-destructive text-center">{error}</p>
              </CardContent>
            </Card>
          )}

          {isLoading && (
            <div className="space-y-4">
              {[1, 2, 3].map((i) => (
                <Card key={i}>
                  <CardContent className="p-6">
                    <div className="space-y-3">
                      <Skeleton className="h-6 w-3/4" />
                      <Skeleton className="h-4 w-1/2" />
                      <div className="flex gap-2">
                        <Skeleton className="h-6 w-20 rounded-full" />
                        <Skeleton className="h-6 w-20 rounded-full" />
                        <Skeleton className="h-6 w-20 rounded-full" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          )}

          {!isLoading && !error && results.length === 0 && (
            <Card>
              <CardContent className="p-12">
                <div className="flex flex-col items-center justify-center text-center">
                  <div className="rounded-full bg-muted p-4 mb-4">
                    <FileSearch className="h-8 w-8 text-muted-foreground" />
                  </div>
                  <p className="text-lg font-medium text-muted-foreground">
                    Aucun cas ne correspond a votre recherche
                  </p>
                  <p className="text-sm text-muted-foreground mt-1">
                    Essayez de modifier vos criteres de recherche
                  </p>
                </div>
              </CardContent>
            </Card>
          )}

          {!isLoading && results.length > 0 && results.map((cas) => (
            <Link href={`/expert/${cas.id_unique}`} key={cas.id_unique}>
              <Card className="hover:shadow-md hover:border-primary/50 transition-all cursor-pointer group">
                <CardContent className="p-6">
                  <div className="flex items-start justify-between">
                    <div className="space-y-3 flex-1">
                      <div>
                        <h3 className="text-lg font-semibold text-primary group-hover:underline">
                          {cas.motif_consultation}
                        </h3>
                        <div className="flex items-center gap-4 mt-1 text-sm text-muted-foreground">
                          <span className="flex items-center gap-1">
                            <User className="h-4 w-4" />
                            {cas.donnees_personnelles.age} ans, {cas.donnees_personnelles.sexe}
                          </span>
                          <span className="text-xs font-mono bg-muted px-2 py-0.5 rounded">
                            ID: {cas.id_unique}
                          </span>
                        </div>
                      </div>

                      <div className="flex flex-wrap gap-2">
                        {cas.symptomes.slice(0, 4).map((s) => (
                          <Badge
                            key={s.nom}
                            variant="secondary"
                            className="flex items-center gap-1"
                          >
                            <Stethoscope className="h-3 w-3" />
                            {s.nom}
                          </Badge>
                        ))}
                        {cas.symptomes.length > 4 && (
                          <Badge variant="outline">
                            +{cas.symptomes.length - 4} autres
                          </Badge>
                        )}
                      </div>
                    </div>

                    <ChevronRight className="h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors" />
                  </div>
                </CardContent>
              </Card>
            </Link>
          ))}
        </div>
      </div>
    </div>
  );
};

export default ExpertPage;
// END OF FILE: app/(marketing)/(main)/expert/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/expert/profile/page.tsx

"use client";

import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Label } from "@/components/ui/label";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import { Separator } from "@/components/ui/separator";
import { Skeleton } from "@/components/ui/skeleton";
import { Badge } from "@/components/ui/badge";
import { getExpertProfile, updateExpertProfile } from "@/lib/api";
import {
  Save,
  User,
  Stethoscope,
  FileText,
  Loader2,
  CheckCircle,
  AlertCircle
} from "lucide-react";

type ExpertProfileData = {
  specialty: string;
  bio: string;
};

const ExpertProfilePage = () => {
  const [profile, setProfile] = useState<ExpertProfileData>({ specialty: "", bio: "" });
  const [isLoading, setIsLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [saveStatus, setSaveStatus] = useState<"idle" | "success" | "error">("idle");

  useEffect(() => {
    const loadProfile = async () => {
      setIsLoading(true);
      try {
        const data = await getExpertProfile();
        setProfile(data);
      } catch (error) {
        console.error("Erreur lors du chargement du profil", error);
      } finally {
        setIsLoading(false);
      }
    };
    loadProfile();
  }, []);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setProfile((prev) => ({ ...prev, [name]: value }));
    setSaveStatus("idle");
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSaving(true);
    setSaveStatus("idle");
    try {
      await updateExpertProfile(profile);
      setSaveStatus("success");
      setTimeout(() => setSaveStatus("idle"), 3000);
    } catch (error) {
      console.error("Erreur lors de la sauvegarde du profil", error);
      setSaveStatus("error");
    } finally {
      setIsSaving(false);
    }
  };

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
        <div className="p-4 sm:p-6 lg:p-8 max-w-3xl mx-auto">
          <Card>
            <CardHeader>
              <Skeleton className="h-8 w-48" />
              <Skeleton className="h-4 w-72 mt-2" />
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center gap-4">
                <Skeleton className="h-20 w-20 rounded-full" />
                <div className="space-y-2">
                  <Skeleton className="h-6 w-32" />
                  <Skeleton className="h-4 w-24" />
                </div>
              </div>
              <Skeleton className="h-10 w-full" />
              <Skeleton className="h-32 w-full" />
            </CardContent>
          </Card>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
      <div className="p-4 sm:p-6 lg:p-8 max-w-3xl mx-auto">
        {/* Header */}
        <div className="mb-6">
          <h1 className="text-3xl font-bold tracking-tight flex items-center gap-3">
            <User className="h-8 w-8 text-primary" />
            Mon Profil Expert
          </h1>
          <p className="text-muted-foreground mt-1">
            Gerez vos informations professionnelles
          </p>
        </div>

        <Card>
          <CardHeader>
            <div className="flex items-center gap-4">
              <Avatar className="h-20 w-20">
                <AvatarImage src="" />
                <AvatarFallback className="bg-primary/10 text-primary text-2xl">
                  {profile.specialty ? profile.specialty.charAt(0).toUpperCase() : "E"}
                </AvatarFallback>
              </Avatar>
              <div>
                <CardTitle className="text-xl">Expert Medical</CardTitle>
                <CardDescription className="flex items-center gap-2 mt-1">
                  <Badge variant="secondary" className="flex items-center gap-1">
                    <Stethoscope className="h-3 w-3" />
                    {profile.specialty || "Specialite non definie"}
                  </Badge>
                </CardDescription>
              </div>
            </div>
          </CardHeader>

          <Separator />

          <CardContent className="pt-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              <div className="space-y-2">
                <Label htmlFor="specialty" className="flex items-center gap-2">
                  <Stethoscope className="h-4 w-4 text-muted-foreground" />
                  Specialite medicale
                </Label>
                <Input
                  id="specialty"
                  name="specialty"
                  value={profile.specialty}
                  onChange={handleChange}
                  placeholder="Ex: Cardiologie, Pediatrie, Medecine Generale..."
                  disabled={isSaving}
                  className="text-base"
                />
                <p className="text-xs text-muted-foreground">
                  Votre domaine d'expertise principal
                </p>
              </div>

              <div className="space-y-2">
                <Label htmlFor="bio" className="flex items-center gap-2">
                  <FileText className="h-4 w-4 text-muted-foreground" />
                  Biographie professionnelle
                </Label>
                <Textarea
                  id="bio"
                  name="bio"
                  value={profile.bio}
                  onChange={handleChange}
                  placeholder="Decrivez votre parcours, votre expertise et votre experience professionnelle..."
                  rows={6}
                  disabled={isSaving}
                  className="resize-none"
                />
                <p className="text-xs text-muted-foreground">
                  Cette description sera visible par les autres membres de la plateforme
                </p>
              </div>

              <Separator />

              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  {saveStatus === "success" && (
                    <div className="flex items-center gap-2 text-green-600 text-sm">
                      <CheckCircle className="h-4 w-4" />
                      Profil sauvegarde avec succes
                    </div>
                  )}
                  {saveStatus === "error" && (
                    <div className="flex items-center gap-2 text-destructive text-sm">
                      <AlertCircle className="h-4 w-4" />
                      Erreur lors de la sauvegarde
                    </div>
                  )}
                </div>

                <Button type="submit" disabled={isSaving} className="gap-2">
                  {isSaving ? (
                    <Loader2 className="h-4 w-4 animate-spin" />
                  ) : (
                    <Save className="h-4 w-4" />
                  )}
                  {isSaving ? "Sauvegarde en cours..." : "Sauvegarder"}
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default ExpertProfilePage;
// END OF FILE: app/(marketing)/(main)/expert/profile/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/layout.tsx

import { MobileHeader } from "@/components/mobile-header";
import { Sidebar } from "@/components/sidebar";

type Props = {
    children: React.ReactNode;
};


const MainLayout = ({ 
    children 
}: Props) => {
    return ( 
        <>
            <MobileHeader />
            <Sidebar className="hidden lg:flex" />
            <main className="lg:pl-64 h-full pt-[50px] lg:pt-0 flex-1">
                <div className="max-w-[1056px] mx-auto pt-6 h-full">
                { children}
                </div>
            </main>           
        </>
    );
};

export default MainLayout;// END OF FILE: app/(marketing)/(main)/layout.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/learn/[courseId]/lesson/[lessonId]/page.tsx

"use client";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { ArrowLeft, Send, Stethoscope, User, GraduationCap, Loader2 } from "lucide-react";
import Link from "next/link";
import { useState, useRef, useEffect } from "react";
import { useParams, useRouter } from "next/navigation";
import { toast } from "sonner"; // Optionnel: pour les erreurs, sinon utilise console.error



// Types pour nos messages
type Role = "doctor" | "patient" | "tutor";

interface Message {
  id: string | number;
  role: Role;
  content: string;
}

export default function LessonChatPage() {
  const params = useParams();

  // On suppose que lessonId correspond à l'UUID du CasClinique dans ton backend
  const casCliniqueId = params.lessonId as string; 
  const courseId = params.courseId as string;
  const [sessionId, setSessionId] = useState<string | null>(null);
  const [isLoadingSession, setIsLoadingSession] = useState(true);
  const router = useRouter();
  const [input, setInput] = useState("");
  const [messages, setMessages] = useState<Message[]>([]);
  const [isTyping, setIsTyping] = useState(false);
  const bottomRef = useRef<HTMLDivElement>(null);


  // 1. INITIALISATION : Créer ou récupérer une session
  useEffect(() => {
    const initSession = async () => {
      try {
         const API_URL = process.env.NEXT_PUBLIC_API_URL || "/api/proxy";
        
        console.log("Appel via le Proxy :", API_URL);

        // ATTENTION : Les URLs ci-dessous ne doivent PAS avoir de slash au début si API_URL finit par un slash
        // Ou on utilise une construction propre.
        
        // Ex: /api/proxy/apprenant/apprenants/
        const usersRes = await fetch(`${API_URL}/apprenant/apprenants/`);
        
        if (!usersRes.ok) throw new Error("Erreur fetch apprenants: " + usersRes.statusText);
        
        const users = await usersRes.json();
        
        let apprenantId;
        if (users.length > 0) {
            apprenantId = users[0].id;
        } else {
            // Créer un utilisateur temporaire si la liste est vide
            const createRes = await fetch(`${API_URL}/apprenant/apprenants/`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ nom: "Test Student", email: `test${Date.now()}@sti.com` })
            });
            const newUser = await createRes.json();
            apprenantId = newUser.id;
        }

       console.log("Tentative création session avec :", {
        apprenant: apprenantId,
        cas_clinique: casCliniqueId,
        url: `${API_URL}/interface/sessions/`
      });

      const sessionRes = await fetch(`${API_URL}/interface/sessions/`, {
        method: "POST",
        headers: { 
            "Content-Type": "application/json",
            // Si ton backend demande un token, il est injecté par le proxy, 
            // mais assure-toi que l'apprenantId correspond à l'utilisateur connecté
        },
        body: JSON.stringify({
            apprenant: apprenantId,
            cas_clinique: casCliniqueId, 
            date_debut: new Date().toISOString()
        })
      });

      if (!sessionRes.ok) {
        // ICI : On lit la réponse pour comprendre l'erreur
        const errorBody = await sessionRes.text(); 
        console.error(`Erreur Backend (${sessionRes.status}):`, errorBody);
        throw new Error(`Erreur ${sessionRes.status}: ${errorBody}`);
      }

      const sessionData = await sessionRes.json();
      setSessionId(sessionData.id);

        // ÉTAPE C : Charger le contexte du cas clinique (Message initial du tuteur)
        const casRes = await fetch(`${API_URL}/expert/cas-cliniques/${casCliniqueId}/`);
        if (casRes.ok) {
            const casData = await casRes.json();
            setMessages([
                {
                    id: "intro",
                    role: "tutor",
                    content: `Bienvenue. Cas : ${casData.titre}. ${casData.historique_medical || "Commencez l'interrogatoire."}`
                }
            ]);
        }

      } catch (error) {
        console.error("Erreur init:", error);
        // Fallback message si erreur backend
        setMessages([{ id: "err", role: "tutor", content: "Erreur de connexion au serveur STI. Vérifiez que le Backend tourne."}]);
      } finally {
        setIsLoadingSession(false);
      }
    };

    if (casCliniqueId) {
        initSession();
    }
  }, [casCliniqueId]);






  // Scroll automatique
  useEffect(() => {
    bottomRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isTyping]);

  // 2. ENVOI DE MESSAGE (Interaction)
  const handleSend = async () => {
    if (!input.trim() || !sessionId) return;

    const currentInput = input;
    setInput(""); // Vider l'input tout de suite
    
    // Optimistic UI : On affiche le message du médecin tout de suite
    const tempId = Date.now();
    setMessages((prev) => [...prev, { id: tempId, role: "doctor", content: currentInput }]);
    setIsTyping(true);

    try {
        const API_URL = process.env.NEXT_PUBLIC_API_URL;

        // Appel au endpoint /interactions/
        const res = await fetch(`${API_URL}/interface/interactions/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                session: sessionId,
                question_contenu: currentInput,
                // reponse_contenu sera généré par le backend/IA
            })
        });

        if (!res.ok) throw new Error("Erreur lors de l'envoi");

        const data = await res.json();

        // Ajout de la réponse du Patient (simulé par l'IA du backend)
        if (data.reponse_contenu) {
            setMessages((prev) => [...prev, {
                id: `${data.id}-patient`,
                role: "patient",
                content: data.reponse_contenu
            }]);
        }

        // Ajout du Feedback Tuteur (si existant)
        if (data.feedback_contenu) {
            // Petit délai pour simuler la lecture du tuteur
            setTimeout(() => {
                setMessages((prev) => [...prev, {
                    id: `${data.id}-tutor`,
                    role: "tutor",
                    content: data.feedback_contenu
                }]);
            }, 800);
        }

    } catch (error) {
        console.error("Erreur interaction:", error);
        setMessages((prev) => [...prev, { id: Date.now(), role: "tutor", content: "Erreur: Je n'ai pas pu analyser votre réponse."}]);
    } finally {
        setIsTyping(false);
    }
  };


  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === "Enter") handleSend();
  };

if (isLoadingSession) {
  return (
      <div className="flex h-screen items-center justify-center bg-slate-50">
          <div className="flex flex-col items-center gap-4">
              <Loader2 className="h-10 w-10 animate-spin text-green-600" />
              <p className="text-slate-500 font-medium">Préparation de la salle de consultation...</p>
          </div>
      </div>
  );
}

  return (
    <div className="flex flex-col h-[calc(100vh-80px)] max-w-3xl mx-auto bg-slate-50 border-x-2 border-slate-200">
      
      {/* HEADER */}
      <div className="bg-white border-b p-4 flex items-center justify-between sticky top-0 z-10 shadow-sm">
        <div className="flex items-center gap-x-4">
            <Link href={`/learn/${courseId}`}>
                <Button variant="ghost" size="icon">
                    <ArrowLeft className="h-6 w-6 text-slate-500" />
                </Button>
            </Link>
            <div>
                <h2 className="font-bold text-lg text-slate-700">Consultation</h2>
                <div className="text-xs text-green-600 font-medium flex items-center gap-1">
                    <span className="relative flex h-2 w-2">
                      <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span className="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    Connecté au STI
                </div>
            </div>
        </div>
      </div>

      {/* CHAT AREA */}
      <div className="flex-1 overflow-y-auto p-4 space-y-6 bg-slate-50">
        {messages.map((msg) => (
          <div
            key={msg.id}
            className={`flex w-full ${
              msg.role === "doctor" ? "justify-end" : "justify-start"
            }`}
          >
            <div className={`flex max-w-[80%] ${msg.role === "doctor" ? "flex-row-reverse" : "flex-row"} gap-3`}>
                
                {/* AVATAR */}
                <div className={`h-10 w-10 rounded-full flex items-center justify-center shrink-0 shadow-sm border-2
                    ${msg.role === "doctor" ? "bg-green-100 border-green-200" : 
                      msg.role === "patient" ? "bg-blue-100 border-blue-200" : "bg-yellow-100 border-yellow-200"
                    }`}
                >
                    {msg.role === "doctor" && <Stethoscope className="h-5 w-5 text-green-600" />}
                    {msg.role === "patient" && <User className="h-5 w-5 text-blue-600" />}
                    {msg.role === "tutor" && <GraduationCap className="h-5 w-5 text-yellow-600" />}
                </div>

                {/* MESSAGE CONTENT */}
                <div className={`p-4 rounded-2xl shadow-sm text-sm relative
                    ${msg.role === "doctor" 
                        ? "bg-green-500 text-white rounded-tr-none" 
                        : msg.role === "patient" 
                            ? "bg-white text-slate-700 border border-slate-200 rounded-tl-none" 
                            : "bg-yellow-50 text-yellow-800 border border-yellow-200 font-medium rounded-tl-none w-full"
                    }`}
                >
                    {msg.role === "tutor" && (
                        <span className="text-xs font-bold text-yellow-600 block mb-1 uppercase tracking-wider">
                            Conseil du Tuteur
                        </span>
                    )}
                    {msg.content}
                </div>
            </div>
          </div>
        ))}
        
        {isTyping && (
             <div className="flex justify-start w-full">
                <div className="flex items-center gap-2 ml-14 bg-white px-4 py-3 rounded-2xl border border-slate-200">
                    <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.3s]"></div>
                    <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.15s]"></div>
                    <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div>
                </div>
            </div>
        )}
        <div ref={bottomRef} />
      </div>

      {/* INPUT */}
      <div className="p-4 bg-white border-t border-slate-200">
        <div className="flex items-center gap-x-2 max-w-3xl mx-auto">
            <Input 
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyDown={handleKeyDown}
                placeholder="Posez votre question clinique..."
                className="flex-1 bg-slate-100 border-0 focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-0 text-base py-6 rounded-xl"
                disabled={isTyping || !sessionId}
            />
            <Button 
                onClick={handleSend} 
                disabled={!input.trim() || isTyping || !sessionId}
                className="h-12 w-12 rounded-xl bg-green-500 hover:bg-green-600 text-white shadow-md transition-all"
            >
                <Send className="h-5 w-5" />
            </Button>
        </div>
      </div>
    </div>
  );
}// END OF FILE: app/(marketing)/(main)/learn/[courseId]/lesson/[lessonId]/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/learn/[courseId]/lesson/test

// END OF FILE: app/(marketing)/(main)/learn/[courseId]/lesson/test

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/learn/[courseId]/page.tsx

// const LearnPage = () => {
//     return ( 
//         <div className="di">
//             Learn Page
//         </div>
//      );
// }
 
// export default LearnPage;



import { Button } from "@/components/ui/button";
import Image from "next/image";
import Link from "next/link";


// Interface pour les props avec paramètres dynamiques
interface PageProps {
  params: Promise<{
    courseId: string;
  }>;
}

// Données des cours (à synchroniser avec votre dashboard)
const COURSES_DATA: Record<string, { title: string; color: string; image: string }> = {
  "paludisme": { title: "Paludisme", color: "bg-green-500", image: "/paludisme.png" },
  "diabete": { title: "Diabète", color: "bg-blue-500", image: "/diabete.png" },
  "avc": { title: "AVC", color: "bg-red-500", image: "/avc.png" },
  "cancer-col": { title: "Cancer du Col", color: "bg-pink-500", image: "/cervical_cancer.png" },
};

export default async function LearnPage({ params }: PageProps) {
  // Dans Next.js 15+, params est une Promise
  const resolvedParams = await params;
  const courseId = resolvedParams.courseId;

  // Vérifier si le cours existe
  const courseData = COURSES_DATA[courseId];
  
  if (!courseData) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="text-center">
          <h1 className="text-2xl font-bold text-neutral-700 mb-2">Cours introuvable</h1>
          <p className="text-neutral-500 mb-4">Le cours "{courseId}" n'existe pas.</p>
          <Button asChild>
            <a href="/learn">Retour aux cours</a>
          </Button>
        </div>
      </div>
    );
  }

  return (
    <div className="flex flex-row-reverse gap-[48px] px-6">
      
      {/* COLONNE DE DROITE (User progress) - Cachée sur mobile */}
      <div className="hidden lg:block w-[368px] sticky self-end bottom-6">
        <div className="min-h-[calc(100vh-48px)] sticky top-6 flex flex-col gap-y-4">
          <div className="border-2 rounded-xl p-4 flex flex-col gap-y-2">
            <h3 className="font-bold text-lg text-neutral-700">Mon statut</h3>
            <div className="flex items-center gap-x-2">
              <Image src={courseData.image} height={30} width={30} alt="Points" />
              <span className="font-bold text-neutral-600">0 XP</span>
            </div>
          </div>
        </div>
      </div>

      {/* COLONNE CENTRALE (Leçons) */}
      <div className="w-full lg:w-[600px] flex flex-col gap-y-12 mb-10">
        
        {/* Entête standard */}
        <h1 className="text-2xl font-bold text-neutral-700">Apprentissage</h1>

        {/* UNITÉ 1 */}
        <div>
          {/* Bannière de l'unité */}
          <div className={`${courseData.color} rounded-xl p-5 text-white flex items-center justify-between shadow-sm mb-6`}>
            <div className="flex flex-col gap-y-1">
              <h3 className="text-xl font-bold">Unité 1</h3>
              <p className="text-sm opacity-90">Comprendre le {courseData.title}</p>
            </div>
            <Button variant="secondary" size="lg">Continuer</Button>
          </div>

          {/* Chemin des leçons (Les ronds) */}
          <div className="flex flex-col items-center gap-y-4">
            
            {/* Leçon 1 */}
            <div className="relative">
              {/* Bulle info au dessus */}
              <div className="absolute -top-12 left-1/2 -translate-x-1/2 bg-white border-2 px-3 py-2 rounded-xl font-bold text-green-500 animate-bounce">
                START
                <div className="absolute -bottom-2 left-1/2 -translate-x-1/2 border-x-8 border-x-transparent border-t-8 border-t-white" />
              </div>

              {/* On enveloppe le cercle dans un Link */}
              <Link href={`/learn/${courseId}/lesson/1`}> 
                <div className={`h-[70px] w-[70px] rounded-full ${courseData.color} flex items-center justify-center cursor-pointer shadow-[0_4px_0_0_rgba(0,0,0,0.2)] hover:brightness-110 active:shadow-none active:translate-y-[4px] transition-all`}>
                  <Image src={courseData.image} height={40} width={40} alt="Lesson" />
                </div>
              </Link>
            </div>

            {/* Leçon 2 (Verrouillée / Grise) */}
            <div className="pt-8">
              <div className="h-[70px] w-[70px] rounded-full bg-gray-200 flex items-center justify-center opacity-80 shadow-[0_4px_0_0_#e5e7eb]">
                <Image src="/Minimal_Geometric_Smirk_Face_Icon.png" height={40} width={40} alt="Locked" className="opacity-50 grayscale" />
              </div>
            </div>

            {/* Leçon 3 (Verrouillée) */}
            <div className="pt-8">
              <div className="h-[70px] w-[70px] rounded-full bg-gray-200 flex items-center justify-center opacity-80 shadow-[0_4px_0_0_#e5e7eb]">
                <Image src="/Minimal_Geometric_Smirk_Face_Icon.png" height={40} width={40} alt="Locked" className="opacity-50 grayscale" />
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  );
}// END OF FILE: app/(marketing)/(main)/learn/[courseId]/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/(main)/learn/page.tsx

"use client";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input"; // Assure-toi d'avoir ce composant shadcn ou utilise un input standard
import { Search } from "lucide-react";
import Image from "next/image";
import Link from "next/link";
import { useState } from "react";

// Données fictives (Simulées)
const COURSES = [
  {
    id: "paludisme",
    title: "Le Paludisme",
    description: "Comprendre, prévenir et traiter le paludisme.",
    image: "/paludisme.png",
    color: "bg-green-500", // Couleur de la bannière
    tags: ["Infectieux", "Tropical"],
  },
  {
    id: "diabete",
    title: "Le Diabète",
    description: "Gérer la glycémie et vivre avec le diabète.",
    image: "/diabete.png",
    color: "bg-blue-500",
    tags: ["Chronique", "Nutrition"],
  },
  {
    id: "avc",
    title: "L'AVC",
    description: "Reconnaître les signes et réagir vite.",
    image: "/avc.png",
    color: "bg-red-500",
    tags: ["Urgence", "Cerveau"],
  },
  {
    id: "cancer-col",
    title: "Cancer du Col",
    description: "Prévention, dépistage et traitement.",
    image: "/cervical_cancer.png",
    color: "bg-pink-500",
    tags: ["Cancer", "Femme"],
  },
];

export default function LearnDashboardPage() {
  const [searchQuery, setSearchQuery] = useState("");

  // Filtrer les cours selon la recherche
  const filteredCourses = COURSES.filter((course) =>
    course.title.toLowerCase().includes(searchQuery.toLowerCase())
  );

  return (
    <div className="px-6 py-6 flex flex-col gap-y-8 max-w-[900px] mx-auto">
      
      {/* 1. En-tête et Barre de recherche */}
      <div className="flex flex-col gap-y-4">
        <h1 className="text-3xl font-extrabold text-neutral-700">
          Que souhaitez-vous apprendre aujourd'hui ?
        </h1>
        
        <div className="relative w-full max-w-md">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400" />
          <Input 
            placeholder="Rechercher un cours (ex: Paludisme)..."
            className="pl-10 h-12 rounded-xl border-2 border-slate-200 bg-white focus-visible:ring-green-500"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
          />
        </div>

        {/* Filtres rapides (Optionnel) */}
        <div className="flex gap-2 mt-2">
            <Button variant="outline" size="sm" className="rounded-full text-slate-600">Tout</Button>
            <Button variant="ghost" size="sm" className="rounded-full text-slate-500">Maladies infectieuses</Button>
            <Button variant="ghost" size="sm" className="rounded-full text-slate-500">Maladies chroniques</Button>
        </div>
      </div>

      {/* 2. Grille des cartes */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 pb-10">
        {filteredCourses.map((course) => (
          <Link href={`/learn/${course.id}`} key={course.id}>
            <div className="group border-2 border-slate-200 rounded-2xl overflow-hidden cursor-pointer hover:border-slate-300 hover:shadow-md transition-all bg-white flex flex-col h-full">
              
              {/* Image / Header de la carte */}
              <div className={`${course.color} h-[100px] w-full flex items-center justify-center p-4 relative`}>
                 <div className="bg-white/20 absolute inset-0 group-hover:bg-white/10 transition"/>
                 <Image 
                    src={course.image} 
                    alt={course.title} 
                    width={60} 
                    height={60} 
                    className="object-contain drop-shadow-md transform group-hover:scale-110 transition duration-300"
                 />
              </div>

              {/* Contenu de la carte */}
              <div className="p-5 flex flex-col justify-between flex-1">
                <div>
                    <h3 className="font-bold text-xl text-neutral-700 mb-2 group-hover:text-green-600 transition">
                    {course.title}
                    </h3>
                    <p className="text-slate-500 text-sm leading-relaxed">
                    {course.description}
                    </p>
                </div>

                <div className="mt-6 flex items-center justify-between">
                    {/* Tags */}
                    <div className="flex gap-1">
                        {course.tags.slice(0, 1).map(tag => (
                            <span key={tag} className="text-[10px] uppercase font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded-md">
                                {tag}
                            </span>
                        ))}
                    </div>
                    <Button size="sm" variant="secondary" className="font-bold">
                        Commencer
                    </Button>
                </div>
              </div>

            </div>
          </Link>
        ))}

        {filteredCourses.length === 0 && (
            <div className="col-span-full text-center py-10 text-slate-500">
                Aucun cours trouvé pour "{searchQuery}".
            </div>
        )}
      </div>
    </div>
  );
}// END OF FILE: app/(marketing)/(main)/learn/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/app/(marketing)/page.tsx

import { Button } from "@/components/ui/button"
import { ClerkLoaded, ClerkLoading, SignedIn, SignedOut, SignInButton, SignUpButton } from "@clerk/nextjs";
import { Loader } from "lucide-react";
import Image from "next/image";
import Link from "next/link";
//import ButtonsPage from "./buttons/page";

{/*flex min-h-screen items-center justify-center bg-zinc-50 font-sans dark:bg-black */}
export default function Home() {
  return (
    <div className="max-w-[988px] mx-auto flex-1 w-full flex flex-col lg:flex-row items-center justify-center p-4 gap-2">
      <div className="relative w-60 h-60 lg:w-[424px] mb-8 lg:mb-0">
        <Image src="/Mobile_Game_Character_Spritesheet.png" fill alt="Hero"/>
      </div> 
      <div className="flex flex-col items-center gap-y-8">
        <h1 className="text-xl lg:text-3xl font-bold text-neutral-600 max-w-[480px] text-center">
          Learn, practice, and master medical sciences with Tuteur5GI
        </h1>
        <div className="flex flex-col items-center gap-y-3 max-w-[330px] w-full">
          <ClerkLoading>
            <Loader className="h-5 w-5 text-muted-foreground animate-spin" />
          </ClerkLoading>
          <ClerkLoaded>
            <SignedOut>
              <SignUpButton
                mode="modal"
                fallbackRedirectUrl="/learn"
                forceRedirectUrl="/learn"
              >
                <Button size="lg" variant="secondary" className="w-full">
                  Get Started
                </Button>
              </SignUpButton>
              <SignInButton
                mode="modal"
                fallbackRedirectUrl="/learn"
                forceRedirectUrl="/learn"
              >
                <Button size="lg" variant="primaryOutline" className="w-full">
                  I already have an account
                </Button>
              </SignInButton>
            </SignedOut>
            <SignedIn>
              <Button size="lg" variant="secondary" className="w-full" asChild>
                <Link href="/learn">
                  Continue learning
                </Link>
              </Button>
            </SignedIn>
          </ClerkLoaded>
        </div>
      </div>     
    </div>
  );
}
// END OF FILE: app/(marketing)/page.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/expert/case-editor-form.tsx

"use client";

import { useState } from "react";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Label } from "@/components/ui/label";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { FileText, BarChart3, AlignLeft } from "lucide-react";

export type CaseFormData = {
  title: string;
  difficulty: 'Facile' | 'Moyen' | 'Difficile';
  introduction: string;
};

type Props = {
  initialData: CaseFormData;
  onSave: (data: CaseFormData) => void;
};

const difficultyConfig = {
  'Facile': { color: 'bg-green-100 text-green-800', label: 'Facile' },
  'Moyen': { color: 'bg-yellow-100 text-yellow-800', label: 'Moyen' },
  'Difficile': { color: 'bg-red-100 text-red-800', label: 'Difficile' },
};

export const CaseEditorForm = ({ initialData, onSave }: Props) => {
  const [formData, setFormData] = useState<CaseFormData>(initialData);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    const newData = { ...formData, [name]: value };
    setFormData(newData);
    onSave(newData);
  };

  const handleDifficultyChange = (value: string) => {
    const newData = { ...formData, difficulty: value as CaseFormData['difficulty'] };
    setFormData(newData);
    onSave(newData);
  };

  return (
    <Card>
      <CardHeader>
        <div className="flex items-center justify-between">
          <div>
            <CardTitle className="text-xl flex items-center gap-2">
              <FileText className="h-5 w-5" />
              Edition du Cas Clinique
            </CardTitle>
            <CardDescription>
              Modifiez les informations du cas pour les étudiants
            </CardDescription>
          </div>
          <Badge className={difficultyConfig[formData.difficulty].color}>
            {difficultyConfig[formData.difficulty].label}
          </Badge>
        </div>
      </CardHeader>
      <CardContent>
        <form className="space-y-6">
          <div className="space-y-2">
            <Label htmlFor="title" className="flex items-center gap-2">
              <FileText className="h-4 w-4 text-muted-foreground" />
              Titre du cas
            </Label>
            <Input
              id="title"
              name="title"
              value={formData.title}
              onChange={handleChange}
              placeholder="Ex: Fièvre inexpliquée chez un patient de 45 ans..."
              className="text-base"
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="difficulty" className="flex items-center gap-2">
              <BarChart3 className="h-4 w-4 text-muted-foreground" />
              Niveau de difficulté
            </Label>
            <Select
              value={formData.difficulty}
              onValueChange={handleDifficultyChange}
            >
              <SelectTrigger>
                <SelectValue placeholder="Sélectionner la difficulté" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="Facile">
                  <div className="flex items-center gap-2">
                    <div className="h-2 w-2 rounded-full bg-green-500" />
                    Facile
                  </div>
                </SelectItem>
                <SelectItem value="Moyen">
                  <div className="flex items-center gap-2">
                    <div className="h-2 w-2 rounded-full bg-yellow-500" />
                    Moyen
                  </div>
                </SelectItem>
                <SelectItem value="Difficile">
                  <div className="flex items-center gap-2">
                    <div className="h-2 w-2 rounded-full bg-red-500" />
                    Difficile
                  </div>
                </SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="space-y-2">
            <Label htmlFor="introduction" className="flex items-center gap-2">
              <AlignLeft className="h-4 w-4 text-muted-foreground" />
              Texte d'introduction
            </Label>
            <Textarea
              id="introduction"
              name="introduction"
              value={formData.introduction}
              onChange={handleChange}
              placeholder="Présentez le contexte clinique du patient, les circonstances de consultation..."
              rows={6}
              className="resize-none"
            />
            <p className="text-xs text-muted-foreground">
              Ce texte sera affiché aux étudiants au début du cas clinique
            </p>
          </div>
        </form>
      </CardContent>
    </Card>
  );
};
// END OF FILE: components/expert/case-editor-form.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/expert/cases-queue-table.tsx

"use client";

import Link from "next/link";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Progress } from "@/components/ui/progress";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Eye, Clock, AlertCircle } from "lucide-react";

export type CaseData = {
  id: string;
  title: string;
  date: string;
  aiConfidence: number;
};

type Props = {
  cases: CaseData[];
};

const getConfidenceBadge = (confidence: number) => {
  if (confidence >= 80) {
    return <Badge className="bg-green-100 text-green-800 hover:bg-green-100">Haute</Badge>;
  } else if (confidence >= 50) {
    return <Badge className="bg-yellow-100 text-yellow-800 hover:bg-yellow-100">Moyenne</Badge>;
  }
  return <Badge className="bg-red-100 text-red-800 hover:bg-red-100">Faible</Badge>;
};

export const CasesQueueTable = ({ cases }: Props) => {
  return (
    <Card>
      <CardHeader>
        <div className="flex items-center justify-between">
          <div>
            <CardTitle className="text-xl">File d'attente de validation</CardTitle>
            <CardDescription>
              {cases.length} cas en attente de révision par un expert
            </CardDescription>
          </div>
          {cases.length > 0 && (
            <Badge variant="secondary" className="flex items-center gap-1">
              <AlertCircle className="h-3 w-3" />
              {cases.length} en attente
            </Badge>
          )}
        </div>
      </CardHeader>
      <CardContent>
        {cases.length === 0 ? (
          <div className="flex flex-col items-center justify-center py-12 text-center">
            <div className="rounded-full bg-muted p-4 mb-4">
              <Clock className="h-8 w-8 text-muted-foreground" />
            </div>
            <p className="text-lg font-medium text-muted-foreground">Aucun cas en attente</p>
            <p className="text-sm text-muted-foreground mt-1">
              Les nouveaux cas apparaîtront ici automatiquement
            </p>
          </div>
        ) : (
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Titre du Cas</TableHead>
                <TableHead>Date de Soumission</TableHead>
                <TableHead>Confiance IA</TableHead>
                <TableHead className="text-right">Actions</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {cases.map((caseItem) => (
                <TableRow key={caseItem.id} className="group">
                  <TableCell>
                    <p className="font-medium">{caseItem.title}</p>
                    <p className="text-xs text-muted-foreground">ID: {caseItem.id}</p>
                  </TableCell>
                  <TableCell>
                    <div className="flex items-center gap-2">
                      <Clock className="h-4 w-4 text-muted-foreground" />
                      {new Date(caseItem.date).toLocaleDateString('fr-FR', {
                        day: 'numeric',
                        month: 'short',
                        year: 'numeric'
                      })}
                    </div>
                  </TableCell>
                  <TableCell>
                    <div className="space-y-2 min-w-[120px]">
                      <div className="flex items-center justify-between">
                        {getConfidenceBadge(caseItem.aiConfidence)}
                        <span className="text-sm font-medium">{caseItem.aiConfidence}%</span>
                      </div>
                      <Progress value={caseItem.aiConfidence} className="h-2" />
                    </div>
                  </TableCell>
                  <TableCell className="text-right">
                    <Link href={`/expert/editor/${caseItem.id}`}>
                      <Button variant="outline" size="sm" className="gap-2">
                        <Eye className="h-4 w-4" />
                        Vérifier
                      </Button>
                    </Link>
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>
        )}
      </CardContent>
    </Card>
  );
};
// END OF FILE: components/expert/cases-queue-table.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/expert/raw-data-viewer.tsx

"use client";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Badge } from "@/components/ui/badge";
import { Database, Copy, Check } from "lucide-react";
import { Button } from "@/components/ui/button";
import { useState } from "react";

type Props = {
  data: object;
};

export const RawDataViewer = ({ data }: Props) => {
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(JSON.stringify(data, null, 2));
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <Card className="h-full bg-slate-900 border-slate-800">
      <CardHeader className="pb-3">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-2">
            <Database className="h-5 w-5 text-slate-400" />
            <CardTitle className="text-lg text-slate-200">Données Brutes</CardTitle>
          </div>
          <div className="flex items-center gap-2">
            <Badge variant="outline" className="text-slate-400 border-slate-600">
              JSON
            </Badge>
            <Button
              variant="ghost"
              size="sm"
              onClick={handleCopy}
              className="text-slate-400 hover:text-slate-200 hover:bg-slate-800"
            >
              {copied ? (
                <Check className="h-4 w-4 text-green-500" />
              ) : (
                <Copy className="h-4 w-4" />
              )}
            </Button>
          </div>
        </div>
      </CardHeader>
      <CardContent className="pt-0">
        <ScrollArea className="h-[500px] rounded-md border border-slate-700 bg-slate-950 p-4">
          <pre className="text-sm text-green-400 font-mono whitespace-pre-wrap">
            {JSON.stringify(data, null, 2)}
          </pre>
        </ScrollArea>
      </CardContent>
    </Card>
  );
};
// END OF FILE: components/expert/raw-data-viewer.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/expert/stat-card.tsx

"use client";

import { type LucideIcon } from "lucide-react";
import { Card, CardContent } from "@/components/ui/card";

type Props = {
  title: string;
  value: string | number;
  icon: LucideIcon;
  trend?: {
    value: number;
    isPositive: boolean;
  };
};

export const StatCard = ({ title, value, icon: Icon, trend }: Props) => {
  return (
    <Card className="overflow-hidden">
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div className="space-y-1">
            <p className="text-sm font-medium text-muted-foreground">{title}</p>
            <p className="text-3xl font-bold tracking-tight">{value}</p>
            {trend && (
              <p className={`text-xs font-medium ${trend.isPositive ? 'text-green-600' : 'text-red-600'}`}>
                {trend.isPositive ? '+' : ''}{trend.value}% depuis le mois dernier
              </p>
            )}
          </div>
          <div className="rounded-full bg-primary/10 p-3">
            <Icon className="h-6 w-6 text-primary" />
          </div>
        </div>
      </CardContent>
    </Card>
  );
};
// END OF FILE: components/expert/stat-card.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/expert/validation-actions.tsx

"use client";

import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogTrigger,
} from "@/components/ui/alert-dialog";
import { Trash2, Save, Send, AlertTriangle, CheckCircle2 } from "lucide-react";

type Props = {
  onReject: () => void;
  onSaveDraft: () => void;
  onPublish: () => void;
};

export const ValidationActions = ({ onReject, onSaveDraft, onPublish }: Props) => {
  return (
    <Card className="mt-6 border-t-4 border-t-primary">
      <CardContent className="p-4">
        <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <CheckCircle2 className="h-4 w-4" />
            <span>Toutes les modifications sont sauvegardées automatiquement</span>
          </div>

          <div className="flex items-center gap-3">
            <AlertDialog>
              <AlertDialogTrigger asChild>
                <Button variant="destructive" className="gap-2">
                  <Trash2 className="h-4 w-4" />
                  Rejeter
                </Button>
              </AlertDialogTrigger>
              <AlertDialogContent>
                <AlertDialogHeader>
                  <AlertDialogTitle className="flex items-center gap-2">
                    <AlertTriangle className="h-5 w-5 text-destructive" />
                    Confirmer le rejet
                  </AlertDialogTitle>
                  <AlertDialogDescription>
                    Êtes-vous sûr de vouloir rejeter ce cas clinique ?
                    Cette action est irréversible et le cas sera définitivement supprimé.
                  </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                  <AlertDialogCancel>Annuler</AlertDialogCancel>
                  <AlertDialogAction
                    onClick={onReject}
                    className="bg-destructive text-destructive-foreground hover:bg-destructive/90"
                  >
                    Rejeter définitivement
                  </AlertDialogAction>
                </AlertDialogFooter>
              </AlertDialogContent>
            </AlertDialog>

            <Separator orientation="vertical" className="h-8" />

            <Button variant="outline" onClick={onSaveDraft} className="gap-2">
              <Save className="h-4 w-4" />
              Sauvegarder Brouillon
            </Button>

            <AlertDialog>
              <AlertDialogTrigger asChild>
                <Button className="gap-2 bg-green-600 hover:bg-green-700">
                  <Send className="h-4 w-4" />
                  Publier
                </Button>
              </AlertDialogTrigger>
              <AlertDialogContent>
                <AlertDialogHeader>
                  <AlertDialogTitle className="flex items-center gap-2">
                    <CheckCircle2 className="h-5 w-5 text-green-600" />
                    Confirmer la publication
                  </AlertDialogTitle>
                  <AlertDialogDescription>
                    Êtes-vous sûr de vouloir publier ce cas clinique ?
                    Il sera visible par tous les étudiants de la plateforme.
                  </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                  <AlertDialogCancel>Annuler</AlertDialogCancel>
                  <AlertDialogAction
                    onClick={onPublish}
                    className="bg-green-600 hover:bg-green-700"
                  >
                    Publier le cas
                  </AlertDialogAction>
                </AlertDialogFooter>
              </AlertDialogContent>
            </AlertDialog>
          </div>
        </div>
      </CardContent>
    </Card>
  );
};
// END OF FILE: components/expert/validation-actions.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components.json

{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "app/globals.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}
// END OF FILE: components.json

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/mobile-header.tsx

"use client";

import { MobileSidebar } from "./mobile-sidebar";
//lg:hidden
export const MobileHeader = () => {
    return (
        <nav className="lg:hidden px-6 h-[50px] flex items-center bg-green-500 border-b fixed top-0 w-full z-50">
            <MobileSidebar />
        </nav>

    );
} 

// END OF FILE: components/mobile-header.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/mobile-sidebar.tsx

"use client";

import {
    Sheet,
    SheetContent,
    SheetTrigger
} from "@/components/ui/sheet";

import { Sidebar } from "@/components/sidebar";
import { Menu } from "lucide-react";


export const MobileSidebar = () => {
    return (
        <Sheet>
            <SheetTrigger asChild>
                <Menu className="h-6 w-6 text-white cursor-pointer" />
            </SheetTrigger>
            <SheetContent side="left" className="p-0 z-100">
                <Sidebar />
            </SheetContent>
        </Sheet>

    );
}// END OF FILE: components/mobile-sidebar.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/sidebar-item.tsx

"use client";

import { usePathname } from "next/navigation";
import Link from "next/link";
import Image from "next/image";
import { Button } from "./ui/button";

type Props = {
  label: string;
  iconSrc: string;
  href: string;
};

export const SidebarItem = ({ label, iconSrc, href }: Props) => {
  const pathname = usePathname();
  const active = pathname === href;

  return (
    <Button
      variant={active ? "SidebarOutline" : "Sidebar"}
      className="justify-start h-[52px]"
      asChild
    >
      <Link href={href} className="flex items-center">
        <Image
          src={iconSrc}
          alt={`${label} icon`}
          width={32}
          height={32}
          className="mr-5"
        />
        {label}
      </Link>
    </Button>
  );
};
// END OF FILE: components/sidebar-item.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/sidebar.tsx

// import { cn } from "@/lib/utils";
// import Image from "next/image";
// import Link from "next/link";
// import { SidebarItem } from "./sidebar-item";

// type Props = {
//      className?: string;
//  };

//  export const Sidebar = ({ className }: Props) => {
//      return (
//          <div className={cn(
//              "flex  h-full lg:w-64 lg:fixed left-0 top-0 px-4 border-r-2 flex-col",
//              className,
//              )}>
//                  <Link href="/learn" className="absolute top-4 left-4">
//                      <div className="pt-8 pl-4 pb-7 flex items-center gap-x-3">
//                          <Image src="/Minimal_Geometric_Smirk_Face_Icon.png" height={40} width={40} alt="Mascot"/>
//                          <h1 className="text-2xl font-extrabold text-green-600 tracking-wide">
//                              Tuteur5GI
//                          </h1>
//                      </div>
//                  </Link>
//                  <div className="flex flex-col gap-y-2 flex-1">
//                      <SidebarItem 
//                          label="Learn"
//                          href="/learn"
//                          iconSrc="/learn.svg"
//                      />
//                  </div>
//          </div>
//      );
//  };




import { cn } from "@/lib/utils";
import Image from "next/image";
import Link from "next/link";
import { SidebarItem } from "./sidebar-item";
import { 
    ClerkLoading, 
    ClerkLoaded, 
    UserButton, 
} from "@clerk/nextjs";
import { Loader } from "lucide-react";


type Props = {
    className?: string;
};

export const Sidebar = ({ className }: Props) => {
    return (
        <div className={cn(
            "flex h-full lg:w-[256px] lg:fixed left-0 top-0 px-4 border-r-2 flex-col bg-white", // Ajout de bg-white
            className,
        )}>
            {/* Le Link n'est plus en absolute, on gère l'espacement avec du padding */}
            <Link href="/learn">
                <div className="pt-8 pl-4 pb-7 flex items-center gap-x-3">
                    {/* Vérifie bien l'extension : .png ou .svg ? Ton arborescence dit .png */}
                    <Image src="/Minimal_Geometric_Smirk_Face_Icon.png" height={40} width={40} alt="Mascot" />
                    <h1 className="text-2xl font-extrabold text-green-600 tracking-wide">
                        Tuteur5GI
                    </h1>
                </div>
            </Link>

            <div className="flex flex-col gap-y-2 flex-1">
                <SidebarItem
                    label="Apprendre"
                    href="/learn"
                    iconSrc="/learn.png" // Assure-toi que c'est le bon nom (png vs svg)
                />
                <SidebarItem
                    label="Classement"
                    href="/leaderboard"
                    iconSrc="/globe.svg" 
                />
                <SidebarItem
                    label="Quêtes"
                    href="/quests"
                    iconSrc="/target.png" // Remplace par une icône existante
                />
                <SidebarItem
                    label="shop"
                    href="/shop"
                    iconSrc="/shop.png" // Remplace par une icône existante
                />
                <SidebarItem
                    label="Mode Expert"
                    href="/expert"
                    iconSrc="/file.svg" 
                />
            </div>
            
            {/* Optionnel : Bouton de déconnexion ou profil en bas */}
            <div className="p-4">
                <ClerkLoading>
                        <Loader className="h-5 w-5 text-muted-foreground animate-spin " />
                </ClerkLoading>
                <ClerkLoaded>
                    <UserButton afterSignOutUrl="/" />
                </ClerkLoaded>
            </div>
        </div>
    );
};



// END OF FILE: components/sidebar.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/alert-dialog.tsx

"use client"

import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

const AlertDialog = AlertDialogPrimitive.Root

const AlertDialogTrigger = AlertDialogPrimitive.Trigger

const AlertDialogPortal = AlertDialogPrimitive.Portal

const AlertDialogOverlay = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
    ref={ref}
  />
))
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName

const AlertDialogContent = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>
>(({ className, ...props }, ref) => (
  <AlertDialogPortal>
    <AlertDialogOverlay />
    <AlertDialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    />
  </AlertDialogPortal>
))
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName

const AlertDialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
AlertDialogHeader.displayName = "AlertDialogHeader"

const AlertDialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
AlertDialogFooter.displayName = "AlertDialogFooter"

const AlertDialogTitle = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold", className)}
    {...props}
  />
))
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName

const AlertDialogDescription = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
AlertDialogDescription.displayName =
  AlertDialogPrimitive.Description.displayName

const AlertDialogAction = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Action>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Action
    ref={ref}
    className={cn(buttonVariants(), className)}
    {...props}
  />
))
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName

const AlertDialogCancel = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Cancel
    ref={ref}
    className={cn(
      buttonVariants({ variant: "outline" }),
      "mt-2 sm:mt-0",
      className
    )}
    {...props}
  />
))
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}
// END OF FILE: components/ui/alert-dialog.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/avatar.tsx

"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn(
      "relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",
      className
    )}
    {...props}
  />
))
Avatar.displayName = AvatarPrimitive.Root.displayName

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image
    ref={ref}
    className={cn("aspect-square h-full w-full", className)}
    {...props}
  />
))
AvatarImage.displayName = AvatarPrimitive.Image.displayName

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn(
      "flex h-full w-full items-center justify-center rounded-full bg-muted",
      className
    )}
    {...props}
  />
))
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName

export { Avatar, AvatarImage, AvatarFallback }
// END OF FILE: components/ui/avatar.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/badge.tsx

import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }
// END OF FILE: components/ui/badge.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/button.tsx

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "bg-white text-black border-slate-200 border-2 border-b-4 active:border-b-2 hover:bg-slate-100 text-slate-500 rounded-xl",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-green-500 text-destructive-foreground shadow-sm hover:bg-destructive/90",
        primary: 
          "bg-sky-400 text-primary-foreground hover:bg-sky-400/90 border-sky-500 border-b-4 active:border-b-0",
        primaryOutline:
          "bg-white text-sky-500 hover:bg-slate-100",
        secondary: 
          "bg-green-500 text-white font-semibold flex items-center justify-center hover:bg-green-500/90 border-green-600 border-b-4 active:border-b-0",
        secondaryOutline:
          "bg-white text-green-500 hover:bg-slate-100",
        danger: 
          "bg-rose-500 text-primary-foreground hover:bg-rose-500/90 border-rose-600 border-b-4 active:border-b-0",
        dangerOutline:
          "bg-white text-rose-500 hover:bg-slate-100",
        super: 
          "bg-indigo-500 text-primary-foreground hover:bg-indigo-500/90 border-indigo-600 border-b-4 active:border-b-0",
        superOutline:
          "bg-white text-indigo-500 hover:bg-slate-100",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        ghost: 
          "bg-transparent test-slate-500 border-transparent border-0 hover:bg-slate-100",
        Sidebar: 
          "bg-transparent text-slate-500 border-2 border-transparent hover:bg-slate-100 transition-none",
        SidebarOutline: "bg-sky-500/15 text-sky-500 border-sky-300 border-2 hover:bg-sky-500/20 transition-none",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-11 px-4 py-2",
        sm: "h-8 px-3 text-xs",
        lg: "h-12 rounded-md px-8",
        icon: "h-10 w-10",
        rounded: "rounded-full",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }
// END OF FILE: components/ui/button.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/card.tsx

import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }
// END OF FILE: components/ui/card.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/input.tsx

import * as React from "react"

import { cn } from "@/lib/utils"

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }
// END OF FILE: components/ui/input.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/label.tsx

"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
)

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &
    VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(labelVariants(), className)}
    {...props}
  />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }
// END OF FILE: components/ui/label.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/progress.tsx

"use client"

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn(
      "relative h-2 w-full overflow-hidden rounded-full bg-primary/20",
      className
    )}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
))
Progress.displayName = ProgressPrimitive.Root.displayName

export { Progress }
// END OF FILE: components/ui/progress.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/scroll-area.tsx

"use client"

import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root
    ref={ref}
    className={cn("relative overflow-hidden", className)}
    {...props}
  >
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">
      {children}
    </ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
))
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" &&
        "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" &&
        "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
))
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName

export { ScrollArea, ScrollBar }
// END OF FILE: components/ui/scroll-area.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/select.tsx

"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"

import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root

const SelectGroup = SelectPrimitive.Group

const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName =
  SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", className)}
    {...props}
  />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute right-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>
    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
SelectSeparator.displayName = SelectPrimitive.Separator.displayName

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
}
// END OF FILE: components/ui/select.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/separator.tsx

"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(
  (
    { className, orientation = "horizontal", decorative = true, ...props },
    ref
  ) => (
    <SeparatorPrimitive.Root
      ref={ref}
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "shrink-0 bg-border",
        orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        className
      )}
      {...props}
    />
  )
)
Separator.displayName = SeparatorPrimitive.Root.displayName

export { Separator }
// END OF FILE: components/ui/separator.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/sheet.tsx

"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Sheet = SheetPrimitive.Root

const SheetTrigger = SheetPrimitive.Trigger

const SheetClose = SheetPrimitive.Close

const SheetPortal = SheetPrimitive.Portal

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
    ref={ref}
  />
))
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName

const sheetVariants = cva(
  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",
  {
    variants: {
      side: {
        top: "inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",
        bottom:
          "inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",
        left: "inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",
        right:
          "inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",
      },
    },
    defaultVariants: {
      side: "right",
    },
  }
)

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Content>,
  SheetContentProps
>(({ side = "right", className, children, ...props }, ref) => (
  <SheetPortal>
    <SheetOverlay />
    <SheetPrimitive.Content
      ref={ref}
      className={cn(sheetVariants({ side }), className)}
      {...props}
    >
      <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </SheetPrimitive.Close>
      {children}
    </SheetPrimitive.Content>
  </SheetPortal>
))
SheetContent.displayName = SheetPrimitive.Content.displayName

const SheetHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
SheetHeader.displayName = "SheetHeader"

const SheetFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
SheetFooter.displayName = "SheetFooter"

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold text-foreground", className)}
    {...props}
  />
))
SheetTitle.displayName = SheetPrimitive.Title.displayName

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
SheetDescription.displayName = SheetPrimitive.Description.displayName

export {
  Sheet,
  SheetPortal,
  SheetOverlay,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}
// END OF FILE: components/ui/sheet.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/skeleton.tsx

import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn("animate-pulse rounded-md bg-primary/10", className)}
      {...props}
    />
  )
}

export { Skeleton }
// END OF FILE: components/ui/skeleton.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/table.tsx

import * as React from "react"

import { cn } from "@/lib/utils"

const Table = React.forwardRef<
  HTMLTableElement,
  React.HTMLAttributes<HTMLTableElement>
>(({ className, ...props }, ref) => (
  <div className="relative w-full overflow-auto">
    <table
      ref={ref}
      className={cn("w-full caption-bottom text-sm", className)}
      {...props}
    />
  </div>
))
Table.displayName = "Table"

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
))
TableHeader.displayName = "TableHeader"

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody
    ref={ref}
    className={cn("[&_tr:last-child]:border-0", className)}
    {...props}
  />
))
TableBody.displayName = "TableBody"

const TableFooter = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tfoot
    ref={ref}
    className={cn(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    )}
    {...props}
  />
))
TableFooter.displayName = "TableFooter"

const TableRow = React.forwardRef<
  HTMLTableRowElement,
  React.HTMLAttributes<HTMLTableRowElement>
>(({ className, ...props }, ref) => (
  <tr
    ref={ref}
    className={cn(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    )}
    {...props}
  />
))
TableRow.displayName = "TableRow"

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      "h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableHead.displayName = "TableHead"

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn(
      "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableCell.displayName = "TableCell"

const TableCaption = React.forwardRef<
  HTMLTableCaptionElement,
  React.HTMLAttributes<HTMLTableCaptionElement>
>(({ className, ...props }, ref) => (
  <caption
    ref={ref}
    className={cn("mt-4 text-sm text-muted-foreground", className)}
    {...props}
  />
))
TableCaption.displayName = "TableCaption"

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}
// END OF FILE: components/ui/table.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/tabs.tsx

"use client"

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

const Tabs = TabsPrimitive.Root

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      className
    )}
    {...props}
  />
))
TabsList.displayName = TabsPrimitive.List.displayName

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      className
    )}
    {...props}
  />
))
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
))
TabsContent.displayName = TabsPrimitive.Content.displayName

export { Tabs, TabsList, TabsTrigger, TabsContent }
// END OF FILE: components/ui/tabs.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/textarea.tsx

import * as React from "react"

import { cn } from "@/lib/utils"

const Textarea = React.forwardRef<
  HTMLTextAreaElement,
  React.ComponentProps<"textarea">
>(({ className, ...props }, ref) => {
  return (
    <textarea
      className={cn(
        "flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      ref={ref}
      {...props}
    />
  )
})
Textarea.displayName = "Textarea"

export { Textarea }
// END OF FILE: components/ui/textarea.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/ui/tooltip.tsx

"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

const TooltipProvider = TooltipPrimitive.Provider

const Tooltip = TooltipPrimitive.Root

const TooltipTrigger = TooltipPrimitive.Trigger

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Portal>
    <TooltipPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",
        className
      )}
      {...props}
    />
  </TooltipPrimitive.Portal>
))
TooltipContent.displayName = TooltipPrimitive.Content.displayName

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
// END OF FILE: components/ui/tooltip.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/components/user-progress.tsx

import Link from "next/link";
import { Button } from "./ui/button";
import Image from "next/image";
import { InfinityIcon } from "lucide-react";

type Props = {
    activeCourse: {imageSrc: string, title: string};
    hearts: number;
    points: number;
    hasActiveSuscription: boolean;
};

export const UserProgress = ({ activeCourse, points, hearts, hasActiveSuscription }: Props) => {
    return (
        <div className="flex items-center justify-between gap-x-2 w-full">
            <Link href="/courses">
                <Button variant="ghost">
                    <Image
                        src={activeCourse.imageSrc}
                        alt={activeCourse.title}
                        className="rounded-md border"
                        width={32}
                        height={32}
                    />
                </Button>
            </Link>
            <Link href="/shop">
                <Button variant="ghost" className="text-orange-500">
                    <Image 
                        src="/points.png"
                        alt="Points"
                        width={28}
                        height={28}
                        className="mr-2"
                    />
                    {points}
                </Button>
            </Link>
            <Link href="/shop">
                <Button variant="ghost" className="text-rose-500">
                    <Image 
                        src="/heart.png"
                        alt="Hearts"
                        width={22}
                        height={22}
                        className="mr-2"
                    />
                    {hasActiveSuscription ? <InfinityIcon className="w-4 h-4 stroke-[3]"/> 
                                        : hearts}
                </Button>
            </Link>

            <Link href="/shop">
                <Button variant="ghost" className="text-orange-500">
                    <Image 
                        src="/points.svg"
                        alt="Points"
                        width={28}
                        height={28}
                        className="mr-2"
                    />
                    {points}
                </Button>
            </Link>

        </div>
    );
};// END OF FILE: components/user-progress.tsx

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/.env

NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_Y2FzdWFsLW1vbmtmaXNoLTgwLmNsZXJrLmFjY291bnRzLmRldiQ
CLERK_SECRET_KEY=sk_test_azm5zJMz2vKEhrp3jk22siFWkVYbUgDNT5sV4zxXrz

PYTHON_API_BASE_URL="http://104.236.244.230/api/v1"

# Pour le frontend, on lui dit que l'API est le proxy local
NEXT_PUBLIC_API_URL="/api/proxy"// END OF FILE: .env

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/eslint.config.mjs

import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
// END OF FILE: eslint.config.mjs

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/.gitignore

# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*
.env

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# clerk configuration (can include secrets)
/.clerk/
// END OF FILE: .gitignore

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/lib/api.ts

// lib/api.ts

import { z } from "zod";

// Change l'URL de base pour pointer vers notre proxy d'API interne.
const API_BASE_URL = "/api/proxy";

// --- Schémas de validation avec Zod ---
const DonneesPersonnellesSchema = z.object({
  age: z.number(),
  sexe: z.string(),
  profession: z.string().optional().nullable(),
  etat_civil: z.string().optional().nullable(),
});

const CasCliniqueSchema = z.object({
  id_unique: z.string(),
  hash_authentification: z.string(),
  motif_consultation: z.string(),
  donnees_personnelles: DonneesPersonnellesSchema,
  symptomes: z.array(z.object({ nom: z.string(), degre: z.string().optional().nullable(), duree: z.string().optional().nullable() })),
  diagnostic_physique: z.array(z.object({ nom: z.string(), resultat: z.string().optional().nullable() })),
  examens_complementaires: z.array(z.object({ nom: z.string(), resultat: z.string().optional().nullable() })),
  traitement_en_cours: z.array(z.object({ nom: z.string(), efficacite: z.string().optional().nullable() })),
});

const CasesApiResponseSchema = z.array(CasCliniqueSchema);

const FiltersApiResponseSchema = z.object({
    genders: z.array(z.string()),
    professions: z.array(z.string()),
    symptoms: z.array(z.string()),
});


// --- Fonctions d'appel à l'API ---

/**
 * Récupère une liste de cas cliniques, potentiellement filtrée.
 * @param filters - Un objet contenant les filtres.
 */
export const getCases = async (filters: { 
    keyword?: string; 
    min_age?: string; 
    max_age?: string; 
    gender?: string;
    profession?: string;
    symptom?: string;
}) => {
    const params = new URLSearchParams();
    if (filters.keyword) params.append("keyword", filters.keyword);
    if (filters.min_age) params.append("min_age", filters.min_age);
    if (filters.max_age) params.append("max_age", filters.max_age);
    if (filters.gender) params.append("gender", filters.gender);
    if (filters.profession) params.append("profession", filters.profession);
    if (filters.symptom) params.append("symptom", filters.symptom);

    const response = await fetch(`${API_BASE_URL}/cases?${params.toString()}`);
    
    if (!response.ok) {
        throw new Error(`Erreur réseau ou serveur: ${response.statusText}`);
    }

    const data = await response.json();

    const validatedData = CasesApiResponseSchema.safeParse(data);
    if (!validatedData.success) {
        console.error("Erreur de validation Zod:", validatedData.error);
        throw new Error("Les données reçues de l'API sont malformées.");
    }

    return validatedData.data;
};

/**
 * Récupère les filtres disponibles depuis l'API.
 */
export const getFilters = async () => {
    const response = await fetch(`${API_BASE_URL}/filters`);
    if (!response.ok) {
        throw new Error(`Erreur réseau ou serveur: ${response.statusText}`);
    }
    const data = await response.json();
    const validatedData = FiltersApiResponseSchema.safeParse(data);
    if (!validatedData.success) {
        console.error("Erreur de validation Zod pour getFilters:", validatedData.error);
        throw new Error("Les données de filtres reçues de l'API sont malformées.");
    }
    return validatedData.data;
};

/**
 * Récupère les détails complets d'un cas clinique par son ID.
 */
export const getCaseById = async (id: string) => {
    const response = await fetch(`${API_BASE_URL}/cases/${id}`);

    if (!response.ok) {
        throw new Error(`Erreur réseau ou serveur: ${response.statusText}`);
    }
    
    const data = await response.json();

    const validatedData = CasCliniqueSchema.safeParse(data);
    if (!validatedData.success) {
        console.error("Erreur de validation Zod pour getCaseById:", validatedData.error);
        throw new Error("Les données reçues de l'API pour ce cas sont malformées.");
    }
    
    return validatedData.data;
};

/**
 * Déclenche une nouvelle extraction de données depuis la source Fultang.
 */
export const forceExtraction = async () => {
    const response = await fetch(`${API_BASE_URL}/extract/refresh`, {
        method: 'POST',
    });

    if (!response.ok) {
        throw new Error(`Erreur lors du déclenchement de l'extraction: ${response.statusText}`);
    }

    return await response.json();
};


// --- PLACEHOLDERS POUR LES APIS MANQUANTES ---
// TODO: Le backend doit implémenter ces endpoints

export const getExpertDashboardData = async () => {
    console.warn("API non implémentée: getExpertDashboardData");
    return {
      kpis: { pendingCases: 12, validatedCases: 45, studentSuccessRate: "68%" },
      cases: [
        { id: "cas-001", title: "Fièvre inexpliquée chez un voyageur", date: "2025-12-17T10:00:00Z", aiConfidence: 92 },
        { id: "cas-002", title: "Douleur abdominale aiguë post-opératoire", date: "2025-12-16T14:30:00Z", aiConfidence: 78 },
      ]
    };
};

export const updateCase = async (caseId: string, data: any) => {
    console.warn(`API non implémentée: updateCase pour l'ID ${caseId}`, data);
    return { status: "success", message: "Cas mis à jour (simulation)." };
};

export const publishCase = async (caseId: string) => {
    console.warn(`API non implémentée: publishCase pour l'ID ${caseId}`);
    return { status: "success", message: "Cas publié (simulation)." };
};

export const rejectCase = async (caseId: string) => {
    console.warn(`API non implémentée: rejectCase pour l'ID ${caseId}`);
    return { status: "success", message: "Cas rejeté (simulation)." };
};

export const getExpertProfile = async () => {
    console.warn("API non implémentée: getExpertProfile");
    return {
        specialty: "Médecine Interne, Maladies Tropicales",
        bio: "Expert en maladies infectieuses avec 15 ans d'expérience."
    };
};

export const updateExpertProfile = async (data: any) => {
    console.warn("API non implémentée: updateExpertProfile", data);
    return { status: "success", message: "Profil mis à jour (simulation)." };
};
// END OF FILE: lib/api.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/lib/utils.ts

import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
// END OF FILE: lib/utils.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/next.config.ts

import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // On supprime la section 'rewrites' car elle entre en conflit avec notre route API Proxy
  // et ne permet pas d'injecter le token Clerk facilement.
};

export default nextConfig;// END OF FILE: next.config.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/next-env.d.ts

/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/dev/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.
// END OF FILE: next-env.d.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/package.json

{
  "name": "projetsti",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@clerk/nextjs": "^6.36.2",
    "@radix-ui/react-alert-dialog": "^1.1.15",
    "@radix-ui/react-avatar": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-progress": "^1.1.8",
    "@radix-ui/react-scroll-area": "^1.2.10",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-tabs": "^1.1.13",
    "@radix-ui/react-tooltip": "^1.2.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "lucide-react": "^0.556.0",
    "next": "^16.0.10",
    "react": "19.2.1",
    "react-dom": "19.2.1",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.0.8",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
// END OF FILE: package.json

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/postcss.config.mjs

const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
// END OF FILE: postcss.config.mjs

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/proxy.ts

import { clerkMiddleware } from '@clerk/nextjs/server';

export default clerkMiddleware();

export const config = {
  matcher: [
    // Skip Next.js internals and all static files, unless found in search params
    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',
    // Always run for API routes
    '/(api|trpc)(.*)',
  ],
};// END OF FILE: proxy.ts

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Angry_Red_Vector_Face.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Angry_Red_Vector_Face.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/avc.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/avc.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Bored_Skeptical_Face_Icon.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Bored_Skeptical_Face_Icon.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/cervical_cancer.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/cervical_cancer.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/diabete.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/diabete.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Dizzy_Knocked_Out_Emoji_Red.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Dizzy_Knocked_Out_Emoji_Red.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/file.svg

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/file.svg

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/globe.svg

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/globe.svg

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/heart.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/heart.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/learn.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/learn.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Minimal_Geometric_Smirk_Face_Icon.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Minimal_Geometric_Smirk_Face_Icon.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Mobile_Game_Character_Spritesheet.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Mobile_Game_Character_Spritesheet.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/next.svg

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/next.svg

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/paludisme.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/paludisme.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/points.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/points.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Sad_Apologetic_Flat_Icon.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Sad_Apologetic_Flat_Icon.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/Sad_Geometric_Navy_Face_Icon.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/Sad_Geometric_Navy_Face_Icon.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/shop.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/shop.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/target.png

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/target.png

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/vercel.svg

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/vercel.svg

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/public/window.svg

[Non-text file (e.g., binary, data, compressed) - Contents omitted]
// END OF FILE: public/window.svg

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/README.md

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
// END OF FILE: README.md

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/tailwind.config.js

/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}// END OF FILE: tailwind.config.js

//---> PATH: /home/mbogneng-junior/Documents/5GI/Projets/STI/frontend/tsconfig.json

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
// END OF FILE: tsconfig.json

